{
    "name":  "MC_GHE_v1457",
    "group":  "MobiControl_GHE_v1457",
    "format_version":  2,
    "label_template":  "${COUNT}",
    "lock_behavior":  "none",
    "mingle":  null,
    "tracking_tool":  {
                          "link":  "https://jira.soti.net/browse/${ID}",
                          "regex":  "\\[([a-zA-Z]+-[\\d]+)\\]"
                      },
    "timer":  null,
    "parameters":  [
                       {
                           "name":  "VERSION",
                           "value":  "1457"
                       },
                       {
                           "name":  "BRANCH_NAME",
                           "value":  "release/14.5.7"
                       },
                       {
                           "name":  "ARTIFACTS_IN",
                           "value":  "AIn"
                       },
                       {
                           "name":  "ARTIFACTS_OUT",
                           "value":  "ArtifactsOut"
                       },
                       {
                           "name":  "ADS_ENDPOINT",
                           "value":  "https://localhost:9002/AgentDeliveryService/api/v1/"
                       },
                       {
                           "name":  "TOGGLE_LIST_FILE_NAME",
                           "value":  ""
                       },
                       {
                           "name":  "TOGGLE_LIST_FILE_TEMPLATED_PATH",
                           "value":  ""
                       }
                   ],
    "environment_variables":  [
                                  {
                                      "name":  "MC_ARTIFACTS_IN",
                                      "value":  "#{ARTIFACTS_IN}"
                                  },
                                  {
                                      "name":  "MC_ARTIFACTS_OUT",
                                      "value":  "#{ARTIFACTS_OUT}"
                                  },
                                  {
                                      "name":  "MC_ARTIFACTORY",
                                      "value":  "MobiControl_Pipeline"
                                  },
                                  {
                                      "name":  "AWS_S3_BUCKET_NAME",
                                      "value":  "mobicontrol-installer"
                                  },
                                  {
                                      "name":  "AMI_TARGET_OS",
                                      "value":  "WS2016"
                                  },
                                  {
                                      "name":  "AMI_TARGET_MSSQL",
                                      "value":  "2016SP1"
                                  },
                                  {
                                      "name":  "VCREDIST_PATH",
                                      "value":  "/ops/distribs/VCredist/vcredist"
                                  },
                                  {
                                      "name":  "SQL_DOWNLOAD_PATH",
                                      "value":  "/ops/distribs/SQLExpress/SICI_SQLEXPR_x64_ENU_2014_SP2.exe"
                                  },
                                  {
                                      "name":  "MC_ABS_PROD_USER_PASSWORD",
                                      "encrypted_value":  "AES:lzcCuNSe4vUx+CsWgN11Uw==:NM6j+ID55wLnC2BB/HDtGA=="
                                  },
                                  {
                                      "name":  "AWS_ACC_S3_BUCKET_NAME",
                                      "value":  "acceptance-binaries"
                                  }
                              ],
    "materials":  [
                      {
                          "url":  "https://serv_gocd:DevOps2016@ghe.soti.net/MobiControl/MobiControlBackend.git",
                          "branch":  "#{BRANCH_NAME}",
                          "auto_update":  false,
                          "name":  "MC",
                          "type":  "git",
                          "destination":  "#{ARTIFACTS_IN}",
                          "shallow_clone":  true
                      },
                      {
                          "type":  "dependency",
                          "name":  "NGUI",
                          "pipeline":  "NGUI_v#{VERSION}",
                          "stage":  "Publish"
                      },
                      {
                          "type":  "dependency",
                          "name":  "AndroidAgentDeliveryService",
                          "pipeline":  "AndroidAgentDeliveryService",
                          "stage":  "Compilation"
                      }
                  ],
    "stages":  [
                   {
                       "name":  "PreCommit",
                       "fetch_materials":  true,
                       "never_cleanup_artifacts":  false,
                       "clean_working_directory":  true,
                       "environment_variables":  [

                                                 ],
                       "jobs":  [
                                    {
                                        "name":  "Fitness",
                                        "run_instance_count":  null,
                                        "timeout":  30,
                                        "elastic_profile_id":  "OnDemand_BuildVM_BT2017_Small",
                                        "tabs":  [
                                                     {
                                                         "name":  "-BuildReport-",
                                                         "path":  "BuildEvents.Report.html"
                                                     }
                                                 ],
                                        "artifacts":  [
                                                          {
                                                              "source":  "#{ARTIFACTS_OUT}/**/*",
                                                              "destination":  "",
                                                              "type":  "build"
                                                          }
                                                      ],
                                        "properties":  [

                                                       ],
                                        "tasks":  [
                                                      {
                                                          "type":  "plugin",
                                                          "plugin_configuration":  {
                                                                                       "id":  "net.soti.go.plugin.task.psget",
                                                                                       "version":  "1"
                                                                                   },
                                                          "configuration":  [
                                                                                {
                                                                                    "key":  "RepositoryType",
                                                                                    "value":  "SotiDevOps"
                                                                                },
                                                                                {
                                                                                    "key":  "targetDefinitions",
                                                                                    "value":  "Invoke-Tasks:[2.0.0]"
                                                                                },
                                                                                {
                                                                                    "key":  "executionType",
                                                                                    "value":  "Install-Script"
                                                                                },
                                                                                {
                                                                                    "key":  "installationScope",
                                                                                    "value":  "AllUsers"
                                                                                }
                                                                            ]
                                                      },
                                                      {
                                                          "type":  "exec",
                                                          "run_if":  "passed",
                                                          "on_cancel":  null,
                                                          "command":  "%SystemRoot%/System32/WindowsPowerShell/v1.0/powershell.exe",
                                                          "arguments":  [
                                                                            "-ExecutionPolicy",
                                                                            "RemoteSigned",
                                                                            "-NonInteractive",
                                                                            "-NoProfile",
                                                                            "-Command",
                                                                            "\"& 'Invoke-Tasks'\"",
                                                                            "-WorkspaceRoot",
                                                                            "\"%CD%\"",
                                                                            "-ConfigurationFile",
                                                                            "'$In/FitnessFunctions/.ci/Compilation.json'",
                                                                            "-ArtifactsIn",
                                                                            "#{ARTIFACTS_IN}",
                                                                            "-ArtifactsOut",
                                                                            "#{ARTIFACTS_OUT}",
                                                                            "-VersionBuildNumber",
                                                                            "\"%GO_PIPELINE_LABEL%\"",
                                                                            "-RevisionId",
                                                                            "\"%GO_REVISION_MC%\"",
                                                                            "-ExternalArgument",
                                                                            "@{ BuildInfoFileMask = '%MC_BUILDINFO_FILEMASK%'}",
                                                                            "-InjectedVariables",
                                                                            "@{}",
                                                                            "-BranchName",
                                                                            "\"#{BRANCH_NAME}\"",
                                                                            "-GitMaterialSyncConfig",
                                                                            "@{gitUrl='https://ghe.soti.net/MobiControl/MobiControlBackend.git'; gitApiToken='3cf65026f1393d08a11280a13272d0464863a501'; artifactoryUrl='%MC_ARTIFACTORY_URL%'; artifactoryApiKey='%MC_REPO_KEY%'; Repository='%MC_ARTIFACTORY%'; productName='MobiControl'; componentName='FitnessFunctions'}",
                                                                            "-Verbose"
                                                                        ],
                                                          "working_directory":  null
                                                      }
                                                  ]
                                    }
                                ]
                   },
                   {
                       "name":  "Commit",
                       "fetch_materials":  true,
                       "never_cleanup_artifacts":  false,
                       "clean_working_directory":  true,
                       "approval":  null,
                       "environment_variables":  [

                                                 ],
                       "jobs":  [
                                    {
                                        "name":  "ManagedComponents",
                                        "run_instance_count":  null,
                                        "environment_variables":  [

                                                                  ],
                                        "timeout":  30,
                                        "elastic_profile_id":  "OnDemand_BuildTools_Windows_Large",
                                        "tabs":  [
                                                     {
                                                         "name":  "-BuildReport-",
                                                         "path":  "BuildEvents.Report.html"
                                                     },
                                                     {
                                                         "name":  "FitnessPre",
                                                         "path":  "BeforeBuild-Result.html"
                                                     },
                                                     {
                                                         "name":  "FitnessPost",
                                                         "path":  "AfterBuild-Result.html"
                                                     },
                                                     {
                                                         "name":  "NUnit",
                                                         "path":  "UnitTests-Result.html"
                                                     },
                                                     {
                                                         "name":  "NUnit-Alt",
                                                         "path":  "UnitTests-Result.Alternative.html"
                                                     }
                                                 ],
                                        "artifacts":  [
                                                          {
                                                              "source":  "#{ARTIFACTS_OUT}/**/*",
                                                              "destination":  "",
                                                              "type":  "build"
                                                          },
                                                          {
                                                              "source":  "#{ARTIFACTS_OUT}/UnitTests-Result.xml",
                                                              "destination":  "",
                                                              "type":  "test"
                                                          }
                                                      ],
                                        "properties":  [
                                                           {
                                                               "name":  "pre_tests_failed_count",
                                                               "source":  "#{ARTIFACTS_OUT}/BeforeBuild-Result.xml",
                                                               "xpath":  "string(//test-results/@failures)"
                                                           },
                                                           {
                                                               "name":  "pre_tests_error_count",
                                                               "source":  "#{ARTIFACTS_OUT}/BeforeBuild-Result.xml",
                                                               "xpath":  "string(//test-results/@errors)"
                                                           },
                                                           {
                                                               "name":  "post_tests_failed_count",
                                                               "source":  "#{ARTIFACTS_OUT}/AfterBuild-Result.xml",
                                                               "xpath":  "string(//test-results/@failures)"
                                                           },
                                                           {
                                                               "name":  "post_tests_error_count",
                                                               "source":  "#{ARTIFACTS_OUT}/AfterBuild-Result.xml",
                                                               "xpath":  "string(//test-results/@errors)"
                                                           }
                                                       ],
                                        "tasks":  [
                                                      {
                                                          "type":  "fetch",
                                                          "run_if":  "any",
                                                          "pipeline":  "",
                                                          "stage":  "PreCommit",
                                                          "job":  "Fitness",
                                                          "is_source_a_file":  true,
                                                          "source":  "FitnessFunctions.zip",
                                                          "destination":  ""
                                                      },
                                                      {
                                                          "type":  "plugin",
                                                          "plugin_configuration":  {
                                                                                       "id":  "net.soti.go.plugin.task.psget",
                                                                                       "version":  "1"
                                                                                   },
                                                          "configuration":  [
                                                                                {
                                                                                    "key":  "RepositoryType",
                                                                                    "value":  "SotiDevOps"
                                                                                },
                                                                                {
                                                                                    "key":  "targetDefinitions",
                                                                                    "value":  "Invoke-Tasks:[2.0.0],Invoke-DownloadFile:[1.0.0]"
                                                                                },
                                                                                {
                                                                                    "key":  "executionType",
                                                                                    "value":  "Install-Script"
                                                                                },
                                                                                {
                                                                                    "key":  "installationScope",
                                                                                    "value":  "AllUsers"
                                                                                }
                                                                            ]
                                                      },
                                                      {
                                                          "type":  "plugin",
                                                          "plugin_configuration":  {
                                                                                       "id":  "net.soti.go.plugin.task.info",
                                                                                       "version":  "1"
                                                                                   },
                                                          "configuration":  [
                                                                                {
                                                                                    "key":  "HyperVKey",
                                                                                    "value":  "VmImageHash"
                                                                                }
                                                                            ]
                                                      },
                                                      {
                                                          "type":  "exec",
                                                          "run_if":  "passed",
                                                          "on_cancel":  null,
                                                          "command":  "%SystemRoot%/System32/WindowsPowerShell/v1.0/powershell.exe",
                                                          "arguments":  [
                                                                            "-ExecutionPolicy",
                                                                            "RemoteSigned",
                                                                            "-NonInteractive",
                                                                            "-NoProfile",
                                                                            "-Command",
                                                                            "\"& 'Invoke-Tasks'\"",
                                                                            "-WorkspaceRoot",
                                                                            "\"%CD%\"",
                                                                            "-ConfigurationFile",
                                                                            "'$In/ManagedComponents/.ci/Compilation.json'",
                                                                            "-ArtifactsIn",
                                                                            "#{ARTIFACTS_IN}",
                                                                            "-ArtifactsOut",
                                                                            "#{ARTIFACTS_OUT}",
                                                                            "-VersionBuildNumber",
                                                                            "\"%GO_PIPELINE_LABEL%\"",
                                                                            "-RevisionId",
                                                                            "\"%GO_REVISION_MC%\"",
                                                                            "-ExternalArgument",
                                                                            "@{ BuildInfoFileMask = '%MC_BUILDINFO_FILEMASK%'}",
                                                                            "-InjectedVariables",
                                                                            "@{ CodeSignCertificateThumbprint = '%SOTI_CODE_SIGNING_CERTIFICATE_THUMBPRINT%' }",
                                                                            "-BranchName",
                                                                            "\"#{BRANCH_NAME}\"",
                                                                            "-GitMaterialSyncConfig",
                                                                            "@{gitUrl='https://ghe.soti.net/MobiControl/MobiControlBackend.git'; gitApiToken='3cf65026f1393d08a11280a13272d0464863a501'; artifactoryUrl='%MC_ARTIFACTORY_URL%'; artifactoryApiKey='%MC_REPO_KEY%'; Repository='%MC_ARTIFACTORY%'; productName='MobiControl'; componentName='ManagedComponents'}",
                                                                            "-Verbose"
                                                                        ],
                                                          "working_directory":  null
                                                      }
                                                  ]
                                    },
                                    {
                                        "name":  "BDD",
                                        "run_instance_count":  null,
                                        "environment_variables":  [

                                                                  ],
                                        "timeout":  30,
                                        "elastic_profile_id":  "OnDemand_BuildTools_Windows_Small",
                                        "artifacts":  [
                                                          {
                                                              "source":  "#{ARTIFACTS_OUT}/**/*",
                                                              "destination":  "",
                                                              "type":  "build"
                                                          }
                                                      ],
                                        "tabs":  [
                                                     {
                                                         "name":  "-BuildReport-",
                                                         "path":  "BuildEvents.Report.html"
                                                     },
                                                     {
                                                         "name":  "Whitelist",
                                                         "path":  "whitelist.html"
                                                     }
                                                 ],
                                        "tasks":  [
                                                      {
                                                          "type":  "plugin",
                                                          "plugin_configuration":  {
                                                                                       "id":  "net.soti.go.plugin.task.psget",
                                                                                       "version":  "1"
                                                                                   },
                                                          "configuration":  [
                                                                                {
                                                                                    "key":  "RepositoryType",
                                                                                    "value":  "SotiDevOps"
                                                                                },
                                                                                {
                                                                                    "key":  "targetDefinitions",
                                                                                    "value":  "Invoke-Tasks:[2.0.0]"
                                                                                },
                                                                                {
                                                                                    "key":  "executionType",
                                                                                    "value":  "Install-Script"
                                                                                },
                                                                                {
                                                                                    "key":  "installationScope",
                                                                                    "value":  "AllUsers"
                                                                                }
                                                                            ]
                                                      },
                                                      {
                                                          "type":  "plugin",
                                                          "run_if":  "any",
                                                          "plugin_configuration":  {
                                                                                       "id":  "net.soti.go.plugin.task.info",
                                                                                       "version":  "1"
                                                                                   },
                                                          "configuration":  [
                                                                                {
                                                                                    "key":  "HyperVKey",
                                                                                    "value":  "VmImageHash"
                                                                                }
                                                                            ]
                                                      },
                                                      {
                                                          "type":  "exec",
                                                          "run_if":  "passed",
                                                          "on_cancel":  null,
                                                          "command":  "%SystemRoot%/System32/WindowsPowerShell/v1.0/powershell.exe",
                                                          "arguments":  [
                                                                            "-ExecutionPolicy",
                                                                            "RemoteSigned",
                                                                            "-NonInteractive",
                                                                            "-NoProfile",
                                                                            "-Command",
                                                                            "\"& 'Invoke-Tasks'\"",
                                                                            "-WorkspaceRoot",
                                                                            "\"%CD%\"",
                                                                            "-ConfigurationFile",
                                                                            "'$In/Bdd/.ci/Compilation.json'",
                                                                            "-ArtifactsIn",
                                                                            "'%MC_ARTIFACTS_IN%'",
                                                                            "-ArtifactsOut",
                                                                            "'%MC_ARTIFACTS_OUT%'",
                                                                            "-VersionBuildNumber",
                                                                            "\"%GO_PIPELINE_LABEL%\"",
                                                                            "-RevisionId",
                                                                            "\"%GO_REVISION_MC%\"",
                                                                            "-ExternalArgument",
                                                                            "@{ BuildInfoFileMask = '%MC_BUILDINFO_FILEMASK%'}",
                                                                            "-BranchName",
                                                                            "\"#{BRANCH_NAME}\"",
                                                                            "-InjectedVariables",
                                                                            "@{ ServiceUserName = '%MC_TFS_R_USER%'; ServiceUserPassword = '%MC_TFS_R_PASSWORD%'; TfsServer ='%MC_TFS_URL%' }",
                                                                            "-GitMaterialSyncConfig",
                                                                            "@{gitUrl='https://ghe.soti.net/MobiControl/MobiControlBackend.git'; gitApiToken='3cf65026f1393d08a11280a13272d0464863a501'; artifactoryUrl='%MC_ARTIFACTORY_URL%'; artifactoryApiKey='%MC_REPO_KEY%'; Repository='%MC_ARTIFACTORY%'; productName='MobiControl'; componentName='Bdd'}",
                                                                            "-Verbose"
                                                                        ],
                                                          "working_directory":  null
                                                      }
                                                  ]
                                    },
                                    {
                                        "name":  "Database",
                                        "run_instance_count":  null,
                                        "environment_variables":  [

                                                                  ],
                                        "timeout":  60,
                                        "elastic_profile_id":  "OnDemand_BuildVM_BT2017_NodeJS_Medium",
                                        "tabs":  [
                                                     {
                                                         "name":  "-BuildReport-",
                                                         "path":  "BuildEvents.Report.html"
                                                     }
                                                 ],
                                        "artifacts":  [
                                                          {
                                                              "source":  "#{ARTIFACTS_OUT}/**/*",
                                                              "destination":  "",
                                                              "type":  "build"
                                                          }
                                                      ],
                                        "properties":  [

                                                       ],
                                        "tasks":  [
                                                      {
                                                          "type":  "plugin",
                                                          "plugin_configuration":  {
                                                                                       "id":  "net.soti.go.plugin.task.psget",
                                                                                       "version":  "1"
                                                                                   },
                                                          "configuration":  [
                                                                                {
                                                                                    "key":  "RepositoryType",
                                                                                    "value":  "SotiDevOps"
                                                                                },
                                                                                {
                                                                                    "key":  "targetDefinitions",
                                                                                    "value":  "Invoke-Tasks:[2.0.0]"
                                                                                },
                                                                                {
                                                                                    "key":  "executionType",
                                                                                    "value":  "Install-Script"
                                                                                },
                                                                                {
                                                                                    "key":  "installationScope",
                                                                                    "value":  "AllUsers"
                                                                                }
                                                                            ]
                                                      },
                                                      {
                                                          "type":  "plugin",
                                                          "run_if":  "any",
                                                          "plugin_configuration":  {
                                                                                       "id":  "net.soti.go.plugin.task.info",
                                                                                       "version":  "1"
                                                                                   },
                                                          "configuration":  [
                                                                                {
                                                                                    "key":  "HyperVKey",
                                                                                    "value":  "VmImageHash"
                                                                                }
                                                                            ]
                                                      },
                                                      {
                                                          "type":  "exec",
                                                          "run_if":  "passed",
                                                          "on_cancel":  null,
                                                          "command":  "%SystemRoot%/System32/WindowsPowerShell/v1.0/powershell.exe",
                                                          "arguments":  [
                                                                            "-ExecutionPolicy",
                                                                            "RemoteSigned",
                                                                            "-NonInteractive",
                                                                            "-NoProfile",
                                                                            "-Command",
                                                                            "\"& 'Invoke-Tasks'\"",
                                                                            "-WorkspaceRoot",
                                                                            "\"%CD%\"",
                                                                            "-ConfigurationFile",
                                                                            "'$In/Database/.ci/Build-Database.json'",
                                                                            "-ArtifactsIn",
                                                                            "'%MC_ARTIFACTS_IN%'",
                                                                            "-ArtifactsOut",
                                                                            "'%MC_ARTIFACTS_OUT%'",
                                                                            "-VersionBuildNumber",
                                                                            "\"%GO_PIPELINE_LABEL%\"",
                                                                            "-RevisionId",
                                                                            "\"%GO_REVISION_MC%\"",
                                                                            "-ExternalArgument",
                                                                            "@{ BuildInfoFileMask = '%MC_BUILDINFO_FILEMASK%'}",
                                                                            "-BranchName",
                                                                            "\"#{BRANCH_NAME}\"",
                                                                            "-GitMaterialSyncConfig",
                                                                            "@{gitUrl='https://ghe.soti.net/MobiControl/MobiControlBackend.git'; gitApiToken='3cf65026f1393d08a11280a13272d0464863a501'; artifactoryUrl='%MC_ARTIFACTORY_URL%'; artifactoryApiKey='%MC_REPO_KEY%'; Repository='%MC_ARTIFACTORY%'; productName='MobiControl'; componentName='Database'}",
                                                                            "-Verbose"
                                                                        ],
                                                          "working_directory":  null
                                                      }
                                                  ]
                                    },
                                    {
                                        "name":  "CppProjects",
                                        "run_instance_count":  null,
                                        "environment_variables":  [

                                                                  ],
                                        "timeout":  40,
                                        "elastic_profile_id":  "OnDemand_BuildVM_BT2017_HighCPU",
                                        "tabs":  [
                                                     {
                                                         "name":  "-BuildReport-",
                                                         "path":  "BuildEvents.Report.html"
                                                     }
                                                 ],
                                        "artifacts":  [
                                                          {
                                                              "source":  "#{ARTIFACTS_OUT}/**/*",
                                                              "destination":  "",
                                                              "type":  "build"
                                                          }
                                                      ],
                                        "properties":  [

                                                       ],
                                        "tasks":  [
                                                      {
                                                          "type":  "plugin",
                                                          "plugin_configuration":  {
                                                                                       "id":  "net.soti.go.plugin.task.psget",
                                                                                       "version":  "1"
                                                                                   },
                                                          "configuration":  [
                                                                                {
                                                                                    "key":  "RepositoryType",
                                                                                    "value":  "SotiDevOps"
                                                                                },
                                                                                {
                                                                                    "key":  "targetDefinitions",
                                                                                    "value":  "Invoke-Tasks:[2.0.0]"
                                                                                },
                                                                                {
                                                                                    "key":  "executionType",
                                                                                    "value":  "Install-Script"
                                                                                },
                                                                                {
                                                                                    "key":  "installationScope",
                                                                                    "value":  "AllUsers"
                                                                                }
                                                                            ]
                                                      },
                                                      {
                                                          "type":  "plugin",
                                                          "plugin_configuration":  {
                                                                                       "id":  "net.soti.go.plugin.task.info",
                                                                                       "version":  "1"
                                                                                   },
                                                          "configuration":  [
                                                                                {
                                                                                    "key":  "HyperVKey",
                                                                                    "value":  "VmImageHash"
                                                                                }
                                                                            ]
                                                      },
                                                      {
                                                          "type":  "exec",
                                                          "run_if":  "passed",
                                                          "on_cancel":  null,
                                                          "command":  "%SystemRoot%/System32/WindowsPowerShell/v1.0/powershell.exe",
                                                          "arguments":  [
                                                                            "-ExecutionPolicy",
                                                                            "RemoteSigned",
                                                                            "-NonInteractive",
                                                                            "-NoProfile",
                                                                            "-Command",
                                                                            "\"& 'Invoke-Tasks'\"",
                                                                            "-WorkspaceRoot",
                                                                            "\"%CD%\"",
                                                                            "-ConfigurationFile",
                                                                            "'$In/MobiControl/.ci/Cpp.Compilation.json'",
                                                                            "-ArtifactsIn",
                                                                            "'%MC_ARTIFACTS_IN%'",
                                                                            "-ArtifactsOut",
                                                                            "'%MC_ARTIFACTS_OUT%'",
                                                                            "-VersionBuildNumber",
                                                                            "\"%GO_PIPELINE_COUNTER%\"",
                                                                            "-RevisionId",
                                                                            "\"%GO_REVISION_MC%\"",
                                                                            "-BranchName",
                                                                            "\"#{BRANCH_NAME}\"",
                                                                            "-ExternalArgument",
                                                                            "@{ BuildInfoFileMask = '%MC_BUILDINFO_FILEMASK%'}",
                                                                            "-InjectedVariables",
                                                                            "@{ CodeSignCertificateThumbprint = '%SOTI_CODE_SIGNING_CERTIFICATE_THUMBPRINT%' }",
                                                                            "-GitMaterialSyncConfig",
                                                                            "@{gitUrl='https://ghe.soti.net/MobiControl/MobiControlBackend.git'; gitApiToken='3cf65026f1393d08a11280a13272d0464863a501'; artifactoryUrl='%MC_ARTIFACTORY_URL%'; artifactoryApiKey='%MC_REPO_KEY%'; Repository='%MC_ARTIFACTORY%'; productName='MobiControl'; componentName='CppProjects'}",
                                                                            "-Verbose"
                                                                        ],
                                                          "working_directory":  null
                                                      }
                                                  ]
                                    },
                                    {
                                        "name":  "DesktopAgent",
                                        "run_instance_count":  null,
                                        "environment_variables":  [

                                                                  ],
                                        "timeout":  30,
                                        "elastic_profile_id":  "OnDemand_BuildVM_BT2017_Handmade_141_XP",
                                        "tabs":  [
                                                     {
                                                         "name":  "-BuildReport-",
                                                         "path":  "BuildEvents.Report.html"
                                                     }
                                                 ],
                                        "artifacts":  [
                                                          {
                                                              "source":  "#{ARTIFACTS_OUT}/**/*",
                                                              "destination":  "",
                                                              "type":  "build"
                                                          }
                                                      ],
                                        "properties":  [

                                                       ],
                                        "tasks":  [
                                                      {
                                                          "type":  "plugin",
                                                          "plugin_configuration":  {
                                                                                       "id":  "net.soti.go.plugin.task.psget",
                                                                                       "version":  "1"
                                                                                   },
                                                          "configuration":  [
                                                                                {
                                                                                    "key":  "RepositoryType",
                                                                                    "value":  "SotiDevOps"
                                                                                },
                                                                                {
                                                                                    "key":  "targetDefinitions",
                                                                                    "value":  "Invoke-Tasks:[2.0.0]"
                                                                                },
                                                                                {
                                                                                    "key":  "executionType",
                                                                                    "value":  "Install-Script"
                                                                                },
                                                                                {
                                                                                    "key":  "installationScope",
                                                                                    "value":  "AllUsers"
                                                                                }
                                                                            ]
                                                      },
                                                      {
                                                          "type":  "plugin",
                                                          "plugin_configuration":  {
                                                                                       "id":  "net.soti.go.plugin.task.info",
                                                                                       "version":  "1"
                                                                                   },
                                                          "configuration":  [
                                                                                {
                                                                                    "key":  "HyperVKey",
                                                                                    "value":  "VmImageHash"
                                                                                }
                                                                            ]
                                                      },
                                                      {
                                                          "type":  "exec",
                                                          "run_if":  "passed",
                                                          "on_cancel":  null,
                                                          "command":  "%SystemRoot%/System32/WindowsPowerShell/v1.0/powershell.exe",
                                                          "arguments":  [
                                                                            "-ExecutionPolicy",
                                                                            "RemoteSigned",
                                                                            "-NonInteractive",
                                                                            "-NoProfile",
                                                                            "-Command",
                                                                            "\"& 'Invoke-Tasks'\"",
                                                                            "-WorkspaceRoot",
                                                                            "\"%CD%\"",
                                                                            "-ConfigurationFile",
                                                                            "'$In/MobiControl/.ci/DesktopAgent.Compilation.json'",
                                                                            "-ArtifactsIn",
                                                                            "'%MC_ARTIFACTS_IN%'",
                                                                            "-ArtifactsOut",
                                                                            "'%MC_ARTIFACTS_OUT%'",
                                                                            "-VersionBuildNumber",
                                                                            "\"%GO_PIPELINE_LABEL%\"",
                                                                            "-RevisionId",
                                                                            "\"%GO_REVISION_MC%\"",
                                                                            "-BranchName",
                                                                            "\"#{BRANCH_NAME}\"",
                                                                            "-ExternalArgument",
                                                                            "@{ BuildInfoFileMask = '%MC_BUILDINFO_FILEMASK%'}",
                                                                            "-InjectedVariables",
                                                                            "@{ CodeSignCertificateThumbprint = '%SOTI_CODE_SIGNING_CERTIFICATE_THUMBPRINT%' }",
                                                                            "-GitMaterialSyncConfig",
                                                                            "@{gitUrl='https://ghe.soti.net/MobiControl/MobiControlBackend.git'; gitApiToken='3cf65026f1393d08a11280a13272d0464863a501'; artifactoryUrl='%MC_ARTIFACTORY_URL%'; artifactoryApiKey='%MC_REPO_KEY%'; Repository='%MC_ARTIFACTORY%'; productName='MobiControl'; componentName='DesktopAgent'}",
                                                                            "-Verbose"
                                                                        ],
                                                          "working_directory":  null
                                                      }
                                                  ]
                                    },
                                    {
                                        "name":  "PocketControllerEnterprise",
                                        "run_instance_count":  null,
                                        "environment_variables":  [

                                                                  ],
                                        "timeout":  30,
                                        "elastic_profile_id":  "OnDemand_BuildVM_BT2017_Medium",
                                        "tabs":  [
                                                     {
                                                         "name":  "-BuildReport-",
                                                         "path":  "BuildEvents.Report.html"
                                                     }
                                                 ],
                                        "artifacts":  [
                                                          {
                                                              "source":  "#{ARTIFACTS_OUT}/**/*",
                                                              "destination":  "",
                                                              "type":  "build"
                                                          }
                                                      ],
                                        "properties":  [

                                                       ],
                                        "tasks":  [
                                                      {
                                                          "type":  "plugin",
                                                          "plugin_configuration":  {
                                                                                       "id":  "net.soti.go.plugin.task.psget",
                                                                                       "version":  "1"
                                                                                   },
                                                          "configuration":  [
                                                                                {
                                                                                    "key":  "RepositoryType",
                                                                                    "value":  "SotiDevOps"
                                                                                },
                                                                                {
                                                                                    "key":  "targetDefinitions",
                                                                                    "value":  "Invoke-Tasks:[2.0.0]"
                                                                                },
                                                                                {
                                                                                    "key":  "executionType",
                                                                                    "value":  "Install-Script"
                                                                                },
                                                                                {
                                                                                    "key":  "installationScope",
                                                                                    "value":  "AllUsers"
                                                                                }
                                                                            ]
                                                      },
                                                      {
                                                          "type":  "plugin",
                                                          "plugin_configuration":  {
                                                                                       "id":  "net.soti.go.plugin.task.info",
                                                                                       "version":  "1"
                                                                                   },
                                                          "configuration":  [
                                                                                {
                                                                                    "key":  "HyperVKey",
                                                                                    "value":  "VmImageHash"
                                                                                }
                                                                            ]
                                                      },
                                                      {
                                                          "type":  "exec",
                                                          "run_if":  "passed",
                                                          "on_cancel":  null,
                                                          "command":  "%SystemRoot%/System32/WindowsPowerShell/v1.0/powershell.exe",
                                                          "arguments":  [
                                                                            "-ExecutionPolicy",
                                                                            "RemoteSigned",
                                                                            "-NonInteractive",
                                                                            "-NoProfile",
                                                                            "-Command",
                                                                            "\"& 'Invoke-Tasks'\"",
                                                                            "-WorkspaceRoot",
                                                                            "\"%CD%\"",
                                                                            "-ConfigurationFile",
                                                                            "'$In/PocketControllerEnterprise/.ci/Compilation.json'",
                                                                            "-ArtifactsIn",
                                                                            "'%MC_ARTIFACTS_IN%'",
                                                                            "-ArtifactsOut",
                                                                            "'%MC_ARTIFACTS_OUT%'",
                                                                            "-VersionBuildNumber",
                                                                            "\"%GO_PIPELINE_LABEL%\"",
                                                                            "-RevisionId",
                                                                            "\"%GO_REVISION_MC%\"",
                                                                            "-BranchName",
                                                                            "\"#{BRANCH_NAME}\"",
                                                                            "-ExternalArgument",
                                                                            "@{ BuildInfoFileMask = '%MC_BUILDINFO_FILEMASK%'}",
                                                                            "-InjectedVariables",
                                                                            "@{ CodeSignCertificateThumbprint = '%SOTI_CODE_SIGNING_CERTIFICATE_THUMBPRINT%' }",
                                                                            "-GitMaterialSyncConfig",
                                                                            "@{gitUrl='https://ghe.soti.net/MobiControl/MobiControlBackend.git'; gitApiToken='3cf65026f1393d08a11280a13272d0464863a501'; artifactoryUrl='%MC_ARTIFACTORY_URL%'; artifactoryApiKey='%MC_REPO_KEY%'; Repository='%MC_ARTIFACTORY%'; productName='MobiControl'; componentName='PocketControllerEnterprise'}",
                                                                            "-Verbose"
                                                                        ],
                                                          "working_directory":  null
                                                      }
                                                  ]
                                    },
                                    {
                                        "name":  "SSPUI",
                                        "run_instance_count":  null,
                                        "environment_variables":  [

                                                                  ],
                                        "timeout":  30,
                                        "elastic_profile_id":  "OnDemand_BuildVM_BT2017_NodeJS_Medium",
                                        "tabs":  [
                                                     {
                                                         "name":  "-BuildReport-",
                                                         "path":  "BuildEvents.Report.html"
                                                     }
                                                 ],
                                        "artifacts":  [
                                                          {
                                                              "source":  "SSPUI.zip",
                                                              "destination":  "",
                                                              "type":  "build"
                                                          }
                                                      ],
                                        "properties":  [

                                                       ],
                                        "tasks":  [
                                                      {
                                                          "type":  "plugin",
                                                          "plugin_configuration":  {
                                                                                       "id":  "net.soti.go.plugin.task.info",
                                                                                       "version":  "1"
                                                                                   },
                                                          "configuration":  [
                                                                                {
                                                                                    "key":  "HyperVKey",
                                                                                    "value":  "VmImageHash"
                                                                                }
                                                                            ]
                                                      },
                                                      {
                                                          "type":  "exec",
                                                          "run_if":  "passed",
                                                          "on_cancel":  null,
                                                          "command":  "npm install",
                                                          "arguments":  [

                                                                        ],
                                                          "working_directory":  "#{ARTIFACTS_IN}/MobiControl/Web/NGUI/ngui-project/dev/_nodejs"
                                                      },
                                                      {
                                                          "type":  "exec",
                                                          "run_if":  "passed",
                                                          "on_cancel":  null,
                                                          "command":  "npm install -g grunt grunt-cli",
                                                          "arguments":  [

                                                                        ],
                                                          "working_directory":  "#{ARTIFACTS_IN}/MobiControl/Web/NGUI/ngui-project"
                                                      },
                                                      {
                                                          "type":  "exec",
                                                          "run_if":  "passed",
                                                          "on_cancel":  null,
                                                          "command":  "%SystemRoot%/System32/cmd.exe",
                                                          "arguments":  [
                                                                            "/c",
                                                                            "grunt",
                                                                            "@build-release-debug",
                                                                            "--gruntfile",
                                                                            "%CD%\\gruntfile.js"
                                                                        ],
                                                          "working_directory":  "#{ARTIFACTS_IN}/MobiControl/Web/NGUI/ngui-project/dev/_nodejs"
                                                      },
                                                      {
                                                          "type":  "exec",
                                                          "run_if":  "passed",
                                                          "on_cancel":  null,
                                                          "command":  "%SystemRoot%/System32/WindowsPowerShell/v1.0/powershell.exe",
                                                          "arguments":  [
                                                                            "-ExecutionPolicy",
                                                                            "RemoteSigned",
                                                                            "-NonInteractive",
                                                                            "-NoProfile",
                                                                            "-Command",
                                                                            "Compress-Archive",
                                                                            "-Path",
                                                                            "%CD%\\%MC_ARTIFACTS_IN%\\MobiControl\\Web\\NGUI\\ngui-project\\build\\release\\*",
                                                                            "-DestinationPath",
                                                                            "SSPUI.zip"
                                                                        ],
                                                          "working_directory":  ""
                                                      }
                                                  ]
                                    }
                                ]
                   },
                   {
                       "name":  "Packaging",
                       "fetch_materials":  true,
                       "never_cleanup_artifacts":  false,
                       "clean_working_directory":  true,
                       "approval":  null,
                       "environment_variables":  [

                                                 ],
                       "jobs":  [
                                    {
                                        "name":  "Installer",
                                        "run_instance_count":  null,
                                        "environment_variables":  [

                                                                  ],
                                        "timeout":  40,
                                        "elastic_profile_id":  "OnDemand_BuildVM_InstallShield_Large",
                                        "tabs":  [
                                                     {
                                                         "name":  "-BuildReport-",
                                                         "path":  "BuildEvents.Report.html"
                                                     }
                                                 ],
                                        "artifacts":  [
                                                          {
                                                              "source":  "#{ARTIFACTS_OUT}/**/*",
                                                              "destination":  "",
                                                              "type":  "build"
                                                          }
                                                      ],
                                        "properties":  [

                                                       ],
                                        "tasks":  [
                                                      {
                                                          "type":  "plugin",
                                                          "plugin_configuration":  {
                                                                                       "id":  "net.soti.go.plugin.task.info",
                                                                                       "version":  "1"
                                                                                   },
                                                          "configuration":  [
                                                                                {
                                                                                    "key":  "HyperVKey",
                                                                                    "value":  "VmImageHash"
                                                                                }
                                                                            ]
                                                      },
                                                      {
                                                          "type":  "plugin",
                                                          "plugin_configuration":  {
                                                                                       "id":  "net.soti.go.plugin.task.psget",
                                                                                       "version":  "1"
                                                                                   },
                                                          "configuration":  [
                                                                                {
                                                                                    "key":  "RepositoryType",
                                                                                    "value":  "SotiDevOps"
                                                                                },
                                                                                {
                                                                                    "key":  "targetDefinitions",
                                                                                    "value":  "Invoke-DownloadFile:[1.0.0],Invoke-Tasks:[2.0.0]"
                                                                                },
                                                                                {
                                                                                    "key":  "executionType",
                                                                                    "value":  "Install-Script"
                                                                                },
                                                                                {
                                                                                    "key":  "installationScope",
                                                                                    "value":  "AllUsers"
                                                                                }
                                                                            ]
                                                      },
                                                      {
                                                          "type":  "fetch",
                                                          "run_if":  "any",
                                                          "pipeline":  "",
                                                          "stage":  "Commit",
                                                          "job":  "ManagedComponents",
                                                          "is_source_a_file":  true,
                                                          "source":  "ManagedComponents.Binaries.zip",
                                                          "destination":  ""
                                                      },
                                                      {
                                                          "type":  "fetch",
                                                          "run_if":  "any",
                                                          "pipeline":  "",
                                                          "stage":  "Commit",
                                                          "job":  "CppProjects",
                                                          "is_source_a_file":  true,
                                                          "source":  "DeploymentServer.Binaries.zip",
                                                          "destination":  ""
                                                      },
                                                      {
                                                          "type":  "fetch",
                                                          "run_if":  "any",
                                                          "pipeline":  "",
                                                          "stage":  "Commit",
                                                          "job":  "CppProjects",
                                                          "is_source_a_file":  true,
                                                          "source":  "PackageStudio.Binaries.zip",
                                                          "destination":  ""
                                                      },
                                                      {
                                                          "type":  "fetch",
                                                          "run_if":  "any",
                                                          "pipeline":  "",
                                                          "stage":  "Commit",
                                                          "job":  "CppProjects",
                                                          "is_source_a_file":  true,
                                                          "source":  "CommTracer.Binaries.zip",
                                                          "destination":  ""
                                                      },
                                                      {
                                                          "type":  "fetch",
                                                          "run_if":  "any",
                                                          "pipeline":  "",
                                                          "stage":  "Commit",
                                                          "job":  "CppProjects",
                                                          "is_source_a_file":  true,
                                                          "source":  "Simulation.Binaries.zip",
                                                          "destination":  ""
                                                      },
                                                      {
                                                          "type":  "fetch",
                                                          "run_if":  "any",
                                                          "pipeline":  "",
                                                          "stage":  "Commit",
                                                          "job":  "CppProjects",
                                                          "is_source_a_file":  true,
                                                          "source":  "MobiControl.DBSetup.Binaries.zip",
                                                          "destination":  ""
                                                      },
                                                      {
                                                          "type":  "fetch",
                                                          "run_if":  "any",
                                                          "pipeline":  "",
                                                          "stage":  "Commit",
                                                          "job":  "CppProjects",
                                                          "is_source_a_file":  true,
                                                          "source":  "MobiControl.Setup.zip",
                                                          "destination":  ""
                                                      },
                                                      {
                                                          "type":  "fetch",
                                                          "run_if":  "any",
                                                          "pipeline":  "",
                                                          "stage":  "Commit",
                                                          "job":  "Database",
                                                          "is_source_a_file":  true,
                                                          "source":  "Database.Binaries.zip",
                                                          "destination":  ""
                                                      },
                                                      {
                                                          "type":  "fetch",
                                                          "run_if":  "any",
                                                          "pipeline":  "",
                                                          "stage":  "Commit",
                                                          "job":  "DesktopAgent",
                                                          "is_source_a_file":  true,
                                                          "source":  "DesktopAgent.Binaries.zip",
                                                          "destination":  ""
                                                      },
                                                      {
                                                          "type":  "fetch",
                                                          "run_if":  "any",
                                                          "pipeline":  "",
                                                          "stage":  "Commit",
                                                          "job":  "PocketControllerEnterprise",
                                                          "is_source_a_file":  true,
                                                          "source":  "PocketControllerEnterprise.Binaries.zip",
                                                          "destination":  ""
                                                      },
                                                      {
                                                          "type":  "fetch",
                                                          "run_if":  "any",
                                                          "pipeline":  "",
                                                          "stage":  "Commit",
                                                          "job":  "SSPUI",
                                                          "is_source_a_file":  true,
                                                          "source":  "SSPUI.zip",
                                                          "destination":  ""
                                                      },
                                                      {
                                                          "type":  "fetch",
                                                          "run_if":  "any",
                                                          "pipeline":  "NGUI_v#{VERSION}",
                                                          "stage":  "Commit",
                                                          "job":  "Build",
                                                          "is_source_a_file":  true,
                                                          "source":  "release.zip",
                                                          "destination":  ""
                                                      },
                                                      {
                                                          "type":  "exec",
                                                          "run_if":  "passed",
                                                          "on_cancel":  null,
                                                          "command":  "%SystemRoot%/System32/WindowsPowerShell/v1.0/powershell.exe",
                                                          "arguments":  [
                                                                            "-ExecutionPolicy",
                                                                            "RemoteSigned",
                                                                            "-NonInteractive",
                                                                            "-NoProfile",
                                                                            "-Command",
                                                                            "\"& 'Invoke-Tasks'\"",
                                                                            "-WorkspaceRoot",
                                                                            "\"%CD%\"",
                                                                            "-ConfigurationFile",
                                                                            "'$In/MobiControl/.ci/Assemble.Installer.json'",
                                                                            "-ArtifactsIn",
                                                                            "'%MC_ARTIFACTS_IN%'",
                                                                            "-ArtifactsOut",
                                                                            "'%MC_ARTIFACTS_OUT%'",
                                                                            "-VersionBuildNumber",
                                                                            "\"%GO_PIPELINE_COUNTER%\"",
                                                                            "-RevisionId",
                                                                            "\"%GO_REVISION_MC%\"",
                                                                            "-BranchName",
                                                                            "\"#{BRANCH_NAME}\"",
                                                                            "-ExternalArgument",
                                                                            "@{ BuildInfoFileMask = '%MC_BUILDINFO_FILEMASK%'; JenkinsWorkspaceVersion = '%GO_PACKAGE_JENKINSWS_VERSION%'; ArtifactoryUrl = '%MC_ARTIFACTORY_URL%' }",
                                                                            "-InjectedVariables",
                                                                            "@{ CodeSignCertificateThumbprint = '%SOTI_CODE_SIGNING_CERTIFICATE_THUMBPRINT%'; VCredistX86Url ='%MC_ARTIFACTORY_URL%%VCREDIST_PATH%_x86.exe'; VCredistX64Url ='%MC_ARTIFACTORY_URL%%VCREDIST_PATH%_x64.exe'; McHookHelperUrl ='%MC_ARTIFACTORY_URL%/MC_Client_Release/MChookHelper/v#{VERSION}/1/MChookhelper.exe'; SqlDownloadUrl = '%MC_ARTIFACTORY_URL%%SQL_DOWNLOAD_PATH%' }",
                                                                            "-Verbose"
                                                                        ],
                                                          "working_directory":  null
                                                      },
                                                      {
                                                          "type":  "exec",
                                                          "run_if":  "passed",
                                                          "on_cancel":  null,
                                                          "command":  "%SystemRoot%/System32/WindowsPowerShell/v1.0/powershell.exe",
                                                          "arguments":  [
                                                                            "-ExecutionPolicy",
                                                                            "RemoteSigned",
                                                                            "-NonInteractive",
                                                                            "-NoProfile",
                                                                            "-Command",
                                                                            "Copy-Item",
                                                                            "'%MC_ARTIFACTS_IN%/MobiControl/Setup/InstallerInfo.xml'",
                                                                            "-Destination",
                                                                            "'%MC_ARTIFACTS_OUT%'",
                                                                            "-ErrorAction",
                                                                            "SilentlyContinue",
                                                                            "-Verbose"
                                                                        ],
                                                          "working_directory":  null
                                                      }
                                                  ]
                                    },
                                    {
                                        "name":  "Integration-Test-ManagedComponents",
                                        "run_instance_count":  null,
                                        "environment_variables":  [

                                                                  ],
                                        "timeout":  15,
                                        "elastic_profile_id":  "OnDemand_WS2012SQL2012",
                                        "tabs":  [
                                                     {
                                                         "name":  "-BuildReport-",
                                                         "path":  "BuildEvents.Report.html"
                                                     },
                                                     {
                                                         "name":  "NUnit",
                                                         "path":  "Integration-Tests-Result.html"
                                                     },
                                                     {
                                                         "name":  "NUnit-Alt",
                                                         "path":  "Integration-Tests-Result.Alternative.html"
                                                     }
                                                 ],
                                        "artifacts":  [
                                                          {
                                                              "source":  "#{ARTIFACTS_OUT}/Integration-Tests-Result.xml",
                                                              "destination":  "",
                                                              "type":  "test"
                                                          },
                                                          {
                                                              "source":  "#{ARTIFACTS_OUT}/**/*",
                                                              "destination":  "",
                                                              "type":  "build"
                                                          }
                                                      ],
                                        "properties":  [

                                                       ],
                                        "tasks":  [
                                                      {
                                                          "type":  "plugin",
                                                          "plugin_configuration":  {
                                                                                       "id":  "net.soti.go.plugin.task.info",
                                                                                       "version":  "1"
                                                                                   },
                                                          "configuration":  [
                                                                                {
                                                                                    "key":  "HyperVKey",
                                                                                    "value":  "VmImageHash"
                                                                                }
                                                                            ]
                                                      },
                                                      {
                                                          "type":  "plugin",
                                                          "plugin_configuration":  {
                                                                                       "id":  "net.soti.go.plugin.task.psget",
                                                                                       "version":  "1"
                                                                                   },
                                                          "configuration":  [
                                                                                {
                                                                                    "key":  "RepositoryType",
                                                                                    "value":  "SotiDevOps"
                                                                                },
                                                                                {
                                                                                    "key":  "targetDefinitions",
                                                                                    "value":  "Invoke-Tasks:[2.0.0],Invoke-DownloadFile:[1.0.0]"
                                                                                },
                                                                                {
                                                                                    "key":  "executionType",
                                                                                    "value":  "Install-Script"
                                                                                },
                                                                                {
                                                                                    "key":  "installationScope",
                                                                                    "value":  "AllUsers"
                                                                                }
                                                                            ]
                                                      },
                                                      {
                                                          "type":  "fetch",
                                                          "run_if":  "any",
                                                          "pipeline":  "",
                                                          "stage":  "Commit",
                                                          "job":  "Database",
                                                          "is_source_a_file":  true,
                                                          "source":  "Database.Binaries.zip",
                                                          "destination":  ""
                                                      },
                                                      {
                                                          "type":  "fetch",
                                                          "run_if":  "any",
                                                          "pipeline":  "",
                                                          "stage":  "Commit",
                                                          "job":  "ManagedComponents",
                                                          "is_source_a_file":  true,
                                                          "source":  "ManagedComponents.IntegrationTestBinaries.zip",
                                                          "destination":  ""
                                                      },
                                                      {
                                                          "type":  "exec",
                                                          "run_if":  "passed",
                                                          "on_cancel":  null,
                                                          "command":  "netsh advfirewall firewall add rule name=\"SQLExpress Port\" dir=in action=allow protocol=TCP localport=1433",
                                                          "arguments":  [

                                                                        ],
                                                          "working_directory":  null
                                                      },
                                                      {
                                                          "type":  "exec",
                                                          "run_if":  "passed",
                                                          "on_cancel":  null,
                                                          "command":  "%SystemRoot%/System32/WindowsPowerShell/v1.0/powershell.exe",
                                                          "arguments":  [
                                                                            "-ExecutionPolicy",
                                                                            "RemoteSigned",
                                                                            "-NonInteractive",
                                                                            "-NoProfile",
                                                                            "-Command",
                                                                            "\"& 'Invoke-Tasks'\"",
                                                                            "-WorkspaceRoot",
                                                                            "\"%CD%\"",
                                                                            "-ConfigurationFile",
                                                                            "'$In/ManagedComponents/.ci/IntegrationTests.json'",
                                                                            "-ArtifactsIn",
                                                                            "\"%MC_ARTIFACTS_IN%\"",
                                                                            "-ArtifactsOut",
                                                                            "\"%MC_ARTIFACTS_OUT%\"",
                                                                            "-VersionBuildNumber",
                                                                            "\"%GO_PIPELINE_LABEL%\"",
                                                                            "-RevisionId",
                                                                            "\"%GO_REVISION_MC%\"",
                                                                            "-BranchName",
                                                                            "\"#{BRANCH_NAME}\"",
                                                                            "-Verbose"
                                                                        ],
                                                          "working_directory":  null
                                                      }
                                                  ]
                                    },
                                    {
                                        "name":  "Bdd-ValidateCertificates",
                                        "run_instance_count":  null,
                                        "environment_variables":  [

                                                                  ],
                                        "timeout":  30,
                                        "elastic_profile_id":  "Elastic_SmallPowerShell",
                                        "artifacts":  [
                                                          {
                                                              "source":  "#{ARTIFACTS_OUT}/**/*",
                                                              "destination":  "",
                                                              "type":  "build"
                                                          }
                                                      ],
                                        "tabs":  [
                                                     {
                                                         "name":  "-BuildReport-",
                                                         "path":  "BuildEvents.Report.html"
                                                     }
                                                 ],
                                        "tasks":  [
                                                      {
                                                          "type":  "plugin",
                                                          "plugin_configuration":  {
                                                                                       "id":  "net.soti.go.plugin.task.psget",
                                                                                       "version":  "1"
                                                                                   },
                                                          "configuration":  [
                                                                                {
                                                                                    "key":  "RepositoryType",
                                                                                    "value":  "SotiDevOps"
                                                                                },
                                                                                {
                                                                                    "key":  "targetDefinitions",
                                                                                    "value":  "Invoke-Tasks:[1.0.0]"
                                                                                },
                                                                                {
                                                                                    "key":  "executionType",
                                                                                    "value":  "Install-Script"
                                                                                },
                                                                                {
                                                                                    "key":  "installationScope",
                                                                                    "value":  "AllUsers"
                                                                                }
                                                                            ]
                                                      },
                                                      {
                                                          "type":  "exec",
                                                          "run_if":  "passed",
                                                          "on_cancel":  null,
                                                          "command":  "%SystemRoot%/System32/WindowsPowerShell/v1.0/powershell.exe",
                                                          "arguments":  [
                                                                            "-ExecutionPolicy",
                                                                            "RemoteSigned",
                                                                            "-NonInteractive",
                                                                            "-NoProfile",
                                                                            "-Command",
                                                                            "\"& 'Invoke-Tasks'\"",
                                                                            "-WorkspaceRoot",
                                                                            "\"%CD%\"",
                                                                            "-ConfigurationFile",
                                                                            "'$In/Bdd/.ci/ValidateCertificateExpiration.json'",
                                                                            "-ArtifactsIn",
                                                                            "'%MC_ARTIFACTS_IN%'",
                                                                            "-ArtifactsOut",
                                                                            "'%MC_ARTIFACTS_OUT%'",
                                                                            "-VersionBuildNumber",
                                                                            "\"%GO_PIPELINE_LABEL%\"",
                                                                            "-RevisionId",
                                                                            "\"%GO_REVISION_MC%\"",
                                                                            "-BranchName",
                                                                            "\"#{BRANCH_NAME}\"",
                                                                            "-InjectedVariables",
                                                                            "@{ ServiceUserName = '%MC_TFS_R_USER%'; ServiceUserPassword = '%MC_TFS_R_PASSWORD%'; TfsServer ='%MC_TFS_URL%' }",
                                                                            "-Verbose"
                                                                        ],
                                                          "working_directory":  null
                                                      }
                                                  ]
                                    }
                                ]
                   },
                   {
                       "name":  "PrepareAcceptance",
                       "fetch_materials":  true,
                       "never_cleanup_artifacts":  false,
                       "clean_working_directory":  true,
                       "approval":  null,
                       "environment_variables":  [

                                                 ],
                       "jobs":  [
                                    {
                                        "name":  "GetWorkspace",
                                        "run_instance_count":  null,
                                        "environment_variables":  [

                                                                  ],
                                        "timeout":  40,
                                        "elastic_profile_id":  "Elastic_SmallPowerShell",
                                        "tabs":  [
                                                     {
                                                         "name":  "-BuildReport-",
                                                         "path":  "BuildEvents.Report.html"
                                                     }
                                                 ],
                                        "artifacts":  [
                                                          {
                                                              "source":  "#{ARTIFACTS_IN}/Acceptance/.ci",
                                                              "destination":  "",
                                                              "type":  "build"
                                                          },
                                                          {
                                                              "source":  "AgentDeliveryService.Binaries.zip",
                                                              "destination":  "",
                                                              "type":  "build"
                                                          }
                                                      ],
                                        "properties":  [

                                                       ],
                                        "tasks":  [
                                                      {
                                                          "type":  "plugin",
                                                          "plugin_configuration":  {
                                                                                       "id":  "net.soti.go.plugin.task.info",
                                                                                       "version":  "1"
                                                                                   },
                                                          "configuration":  [
                                                                                {
                                                                                    "key":  "HyperVKey",
                                                                                    "value":  "VmImageHash"
                                                                                }
                                                                            ]
                                                      },
                                                      {
                                                          "type":  "plugin",
                                                          "plugin_configuration":  {
                                                                                       "id":  "net.soti.go.plugin.task.psget",
                                                                                       "version":  "1"
                                                                                   },
                                                          "configuration":  [
                                                                                {
                                                                                    "key":  "RepositoryType",
                                                                                    "value":  "SotiDevOps"
                                                                                },
                                                                                {
                                                                                    "key":  "targetDefinitions",
                                                                                    "value":  "Copy-FilesToS3:[1.0.0],Copy-McFilesToS3:[1.0.0]"
                                                                                },
                                                                                {
                                                                                    "key":  "executionType",
                                                                                    "value":  "Install-Script"
                                                                                },
                                                                                {
                                                                                    "key":  "installationScope",
                                                                                    "value":  "AllUsers"
                                                                                }
                                                                            ]
                                                      },
                                                      {
                                                          "type":  "fetch",
                                                          "run_if":  "passed",
                                                          "pipeline":  "",
                                                          "stage":  "Packaging",
                                                          "job":  "Installer",
                                                          "is_source_a_file":  false,
                                                          "source":  "Setup",
                                                          "destination":  "#{ARTIFACTS_IN}"
                                                      },
                                                      {
                                                          "type":  "fetch",
                                                          "run_if":  "passed",
                                                          "pipeline":  "",
                                                          "stage":  "Commit",
                                                          "job":  "BDD",
                                                          "is_source_a_file":  true,
                                                          "source":  "Bdd.Binaries.zip",
                                                          "destination":  ""
                                                      },
                                                      {
                                                          "type":  "fetch",
                                                          "run_if":  "passed",
                                                          "pipeline":  "AndroidAgentDeliveryService",
                                                          "stage":  "Compilation",
                                                          "job":  "Build-AndroidAgentDeliveryService",
                                                          "is_source_a_file":  true,
                                                          "source":  "AgentDeliveryService.Binaries.zip",
                                                          "destination":  ""
                                                      },
                                                      {
                                                          "type":  "exec",
                                                          "run_if":  "passed",
                                                          "on_cancel":  null,
                                                          "command":  "%SystemRoot%/System32/WindowsPowerShell/v1.0/powershell.exe",
                                                          "arguments":  [
                                                                            "-ExecutionPolicy",
                                                                            "RemoteSigned",
                                                                            "-NonInteractive",
                                                                            "-NoProfile",
                                                                            "-Command",
                                                                            "Copy-McFilesToS3",
                                                                            "-WorkspaceRoot",
                                                                            "%CD%",
                                                                            "-ArtifactIn",
                                                                            "\"#{ARTIFACTS_IN}\\Setup\"",
                                                                            "-GoPipelineName ",
                                                                            "\"%GO_PIPELINE_NAME%\"",
                                                                            "-GoPipelineCounter",
                                                                            "\"%GO_PIPELINE_COUNTER%/#{ARTIFACTS_IN}/Setup\"",
                                                                            "-AwsS3BucketName",
                                                                            "\"%AWS_ACC_S3_BUCKET_NAME%\"",
                                                                            "-Region",
                                                                            "%AWS_REGION%",
                                                                            "-AwsAccessKey",
                                                                            "\"%AWS_ACCESS_KEY_ID%\"",
                                                                            "-AwsSecretKey",
                                                                            "\"%AWS_SECRET_ACCESS_KEY%\""
                                                                        ],
                                                          "working_directory":  null
                                                      },
                                                      {
                                                          "type":  "exec",
                                                          "run_if":  "passed",
                                                          "on_cancel":  null,
                                                          "command":  "%SystemRoot%/System32/WindowsPowerShell/v1.0/powershell.exe",
                                                          "arguments":  [
                                                                            "-ExecutionPolicy",
                                                                            "RemoteSigned",
                                                                            "-NonInteractive",
                                                                            "-NoProfile",
                                                                            "-Command",
                                                                            "Copy-FilesToS3",
                                                                            "-Files",
                                                                            "@('%CD%\\Bdd.Binaries.zip', '%CD%\\AgentDeliveryService.Binaries.zip')",
                                                                            "-S3KeyPrefix",
                                                                            "\"%GO_PIPELINE_NAME%/%GO_PIPELINE_COUNTER%\"",
                                                                            "-AwsS3BucketName",
                                                                            "\"%AWS_ACC_S3_BUCKET_NAME%\"",
                                                                            "-Region",
                                                                            "%AWS_REGION%",
                                                                            "-AwsAccessKey",
                                                                            "\"%AWS_ACCESS_KEY_ID%\"",
                                                                            "-AwsSecretKey",
                                                                            "\"%AWS_SECRET_ACCESS_KEY%\"",
                                                                            "-Force"
                                                                        ],
                                                          "working_directory":  null
                                                      }
                                                  ]
                                    }
                                ]
                   },
                   {
                       "name":  "ExecuteAcceptance",
                       "fetch_materials":  false,
                       "never_cleanup_artifacts":  false,
                       "clean_working_directory":  true,
                       "approval":  null,
                       "environment_variables":  [
                                                     {
                                                         "name":  "MC_BDD_CONFIG_FILE_PATH",
                                                         "value":  "$In/Acceptance/.ci/AcceptanceStage.FullPartitioning.json"
                                                     },
                                                     {
                                                         "name":  "NUNIT_INTERNAL_TRACE",
                                                         "value":  "Verbose"
                                                     },
                                                     {
                                                         "name":  "BDD_TEST_CASE_TIMEOUT",
                                                         "value":  "00:03:00"
                                                     }
                                                 ],
                       "jobs":  [
                                    {
                                        "name":  "BDD-W2012-SQL2016",
                                        "run_instance_count":  "21",
                                        "environment_variables":  [
                                                                      {
                                                                          "name":  "BDD_TEST_PROJECT_PATH",
                                                                          "value":  "$In:Bdd/Soti.MobiControl.Bdd.Exclude.Security.nunit"
                                                                      },
                                                                      {
                                                                          "name":  "BDD_TEST_RUN_TIMEOUT",
                                                                          "value":  "03:00:00"
                                                                      }
                                                                  ],
                                        "timeout":  120,
                                        "elastic_profile_id":  "AWS_AcceptanceWithSQL2016",
                                        "tabs":  [
                                                     {
                                                         "name":  "-BuildReport-",
                                                         "path":  "BuildEvents.Report.html"
                                                     },
                                                     {
                                                         "name":  "ReportUnit",
                                                         "path":  "BDDTests-Result.html"
                                                     },
                                                     {
                                                         "name":  "NUnit-Alt",
                                                         "path":  "BDDTests-Result.Alternative.html"
                                                     }
                                                 ],
                                        "artifacts":  [
                                                          {
                                                              "source":  "#{ARTIFACTS_OUT}/**/*",
                                                              "destination":  "",
                                                              "type":  "build"
                                                          },
                                                          {
                                                              "source":  "#{ARTIFACTS_OUT}/BDDTests-Result.xml",
                                                              "destination":  "",
                                                              "type":  "test"
                                                          }
                                                      ],
                                        "properties":  [

                                                       ],
                                        "tasks":  [
                                                      {
                                                          "type":  "plugin",
                                                          "plugin_configuration":  {
                                                                                       "id":  "net.soti.go.plugin.task.info",
                                                                                       "version":  "1"
                                                                                   },
                                                          "configuration":  [
                                                                                {
                                                                                    "key":  "HyperVKey",
                                                                                    "value":  "VmImageHash"
                                                                                }
                                                                            ]
                                                      },
                                                      {
                                                          "type":  "fetch",
                                                          "run_if":  "passed",
                                                          "pipeline":  "",
                                                          "stage":  "PrepareAcceptance",
                                                          "job":  "GetWorkspace",
                                                          "is_source_a_file":  false,
                                                          "source":  ".ci",
                                                          "destination":  "#{ARTIFACTS_IN}/Acceptance"
                                                      },
                                                      {
                                                          "type":  "exec",
                                                          "run_if":  "passed",
                                                          "on_cancel":  null,
                                                          "command":  "%SystemRoot%/System32/WindowsPowerShell/v1.0/powershell.exe",
                                                          "arguments":  [
                                                                            "-ExecutionPolicy",
                                                                            "RemoteSigned",
                                                                            "-NonInteractive",
                                                                            "-NoProfile",
                                                                            "-Command",
                                                                            "Copy-S3Object",
                                                                            "-BucketName",
                                                                            "\"%AWS_ACC_S3_BUCKET_NAME%\"",
                                                                            "-KeyPrefix",
                                                                            "\"%GO_PIPELINE_NAME%/%GO_PIPELINE_COUNTER%\"",
                                                                            "-AccessKey",
                                                                            "%AWS_ACCESS_KEY_ID%",
                                                                            "-SecretKey",
                                                                            "%AWS_SECRET_ACCESS_KEY%",
                                                                            "-Region",
                                                                            "%AWS_REGION%",
                                                                            "-LocalFolder",
                                                                            "\"%CD%\"",
                                                                            "-Verbose"
                                                                        ],
                                                          "working_directory":  null
                                                      },
                                                      {
                                                          "type":  "exec",
                                                          "run_if":  "passed",
                                                          "on_cancel":  null,
                                                          "command":  "%SystemRoot%/System32/cmd.exe",
                                                          "arguments":  [
                                                                            "/c",
                                                                            "%SystemRoot%\\System32\\reg.exe",
                                                                            "import",
                                                                            "c:\\hkcu_zones.reg"
                                                                        ],
                                                          "working_directory":  null
                                                      },
                                                      {
                                                          "type":  "plugin",
                                                          "plugin_configuration":  {
                                                                                       "id":  "net.soti.go.plugin.task.psget",
                                                                                       "version":  "1"
                                                                                   },
                                                          "configuration":  [
                                                                                {
                                                                                    "key":  "RepositoryType",
                                                                                    "value":  "SotiDevOps"
                                                                                },
                                                                                {
                                                                                    "key":  "targetDefinitions",
                                                                                    "value":  "Invoke-Tasks:[2.0.0]"
                                                                                },
                                                                                {
                                                                                    "key":  "executionType",
                                                                                    "value":  "Install-Script"
                                                                                },
                                                                                {
                                                                                    "key":  "installationScope",
                                                                                    "value":  "AllUsers"
                                                                                }
                                                                            ]
                                                      },
                                                      {
                                                          "type":  "exec",
                                                          "run_if":  "passed",
                                                          "on_cancel":  null,
                                                          "command":  "%SystemRoot%/System32/WindowsPowerShell/v1.0/powershell.exe",
                                                          "arguments":  [
                                                                            "-ExecutionPolicy",
                                                                            "RemoteSigned",
                                                                            "-NonInteractive",
                                                                            "-NoProfile",
                                                                            "-Command",
                                                                            "\"& 'Invoke-Tasks'\"",
                                                                            "-WorkspaceRoot",
                                                                            "\"%CD%\"",
                                                                            "-ConfigurationFile",
                                                                            "'%MC_BDD_CONFIG_FILE_PATH%'",
                                                                            "-ArtifactsIn",
                                                                            "'%MC_ARTIFACTS_IN%'",
                                                                            "-ArtifactsOut",
                                                                            "'%MC_ARTIFACTS_OUT%'",
                                                                            "-VersionBuildNumber",
                                                                            "\"%GO_PIPELINE_LABEL%\"",
                                                                            "-RevisionId",
                                                                            "\"MCInstaller-%GO_DEPENDENCY_LABEL_INSTALLER%\"",
                                                                            "-BranchName",
                                                                            "\"#{BRANCH_NAME}\"",
                                                                            "-ExternalArgument",
                                                                            "@{ Partitioning = @{ Index = (%GO_JOB_RUN_INDEX% - 1); TotalCount = %GO_JOB_RUN_COUNT% }; GoCdApiUrl = '%GOCD_API_URL%'; GoCdApiUsername = '%GOCD_API_USER%'; GoCdApiPassword = '%GOCD_API_USER_PASSWORD%'; FeatureToggleFilePath = '#{TOGGLE_LIST_FILE_TEMPLATED_PATH}'}",
                                                                            "-InjectedVariables",
                                                                            "@{ BddTestProjectPath = '%BDD_TEST_PROJECT_PATH%'; BddTestRunTimeout = '%BDD_TEST_RUN_TIMEOUT%'; BddTestCaseTimeout = '%BDD_TEST_CASE_TIMEOUT%'; NUnitInternalTrace = '%NUNIT_INTERNAL_TRACE%'; CurrentPipelineName = '%GO_PIPELINE_NAME%'; CurrentStageName = '%GO_STAGE_NAME%'; PipelineCounter = '%GO_PIPELINE_COUNTER%'; PartitionIndex = (%GO_JOB_RUN_INDEX% - 1); PartitionCount = %GO_JOB_RUN_COUNT%; AdsEndpoint = '#{ADS_ENDPOINT}' }",
                                                                            "-Verbose"
                                                                        ],
                                                          "working_directory":  null
                                                      }
                                                  ]
                                    },
                                    {
                                        "name":  "BDD-W2012-SQL2016-Security",
                                        "run_instance_count":  "1",
                                        "environment_variables":  [
                                                                      {
                                                                          "name":  "BDD_TEST_PROJECT_PATH",
                                                                          "value":  "$In:Bdd/Soti.MobiControl.Bdd.Security.nunit"
                                                                      },
                                                                      {
                                                                          "name":  "BDD_TEST_RUN_TIMEOUT",
                                                                          "value":  "01:00:00"
                                                                      }
                                                                  ],
                                        "timeout":  120,
                                        "elastic_profile_id":  "AWS_AcceptanceWithSQL2016",
                                        "tabs":  [
                                                     {
                                                         "name":  "-BuildReport-",
                                                         "path":  "BuildEvents.Report.html"
                                                     },
                                                     {
                                                         "name":  "ReportUnit",
                                                         "path":  "BDDTests-Result.html"
                                                     },
                                                     {
                                                         "name":  "NUnit-Alt",
                                                         "path":  "BDDTests-Result.Alternative.html"
                                                     }
                                                 ],
                                        "artifacts":  [
                                                          {
                                                              "source":  "#{ARTIFACTS_OUT}/**/*",
                                                              "destination":  "",
                                                              "type":  "build"
                                                          },
                                                          {
                                                              "source":  "#{ARTIFACTS_OUT}/BDDTests-Result.xml",
                                                              "destination":  "",
                                                              "type":  "test"
                                                          }
                                                      ],
                                        "properties":  [

                                                       ],
                                        "tasks":  [
                                                      {
                                                          "type":  "fetch",
                                                          "run_if":  "passed",
                                                          "pipeline":  "",
                                                          "stage":  "PrepareAcceptance",
                                                          "job":  "GetWorkspace",
                                                          "is_source_a_file":  false,
                                                          "source":  ".ci",
                                                          "destination":  "#{ARTIFACTS_IN}/Acceptance"
                                                      },
                                                      {
                                                          "type":  "exec",
                                                          "run_if":  "passed",
                                                          "on_cancel":  null,
                                                          "command":  "%SystemRoot%/System32/WindowsPowerShell/v1.0/powershell.exe",
                                                          "arguments":  [
                                                                            "-ExecutionPolicy",
                                                                            "RemoteSigned",
                                                                            "-NonInteractive",
                                                                            "-NoProfile",
                                                                            "-Command",
                                                                            "Copy-S3Object",
                                                                            "-BucketName",
                                                                            "\"%AWS_ACC_S3_BUCKET_NAME%\"",
                                                                            "-KeyPrefix",
                                                                            "\"%GO_PIPELINE_NAME%/%GO_PIPELINE_COUNTER%\"",
                                                                            "-AccessKey",
                                                                            "%AWS_ACCESS_KEY_ID%",
                                                                            "-SecretKey",
                                                                            "%AWS_SECRET_ACCESS_KEY%",
                                                                            "-Region",
                                                                            "%AWS_REGION%",
                                                                            "-LocalFolder",
                                                                            "\"%CD%\"",
                                                                            "-Verbose"
                                                                        ],
                                                          "working_directory":  null
                                                      },
                                                      {
                                                          "type":  "exec",
                                                          "run_if":  "passed",
                                                          "on_cancel":  null,
                                                          "command":  "%SystemRoot%/System32/cmd.exe",
                                                          "arguments":  [
                                                                            "/c",
                                                                            "%SystemRoot%\\System32\\reg.exe",
                                                                            "import",
                                                                            "c:\\hkcu_zones.reg"
                                                                        ],
                                                          "working_directory":  null
                                                      },
                                                      {
                                                          "type":  "plugin",
                                                          "plugin_configuration":  {
                                                                                       "id":  "net.soti.go.plugin.task.psget",
                                                                                       "version":  "1"
                                                                                   },
                                                          "configuration":  [
                                                                                {
                                                                                    "key":  "RepositoryType",
                                                                                    "value":  "SotiDevOps"
                                                                                },
                                                                                {
                                                                                    "key":  "targetDefinitions",
                                                                                    "value":  "Invoke-Tasks:[2.0.0]"
                                                                                },
                                                                                {
                                                                                    "key":  "executionType",
                                                                                    "value":  "Install-Script"
                                                                                },
                                                                                {
                                                                                    "key":  "installationScope",
                                                                                    "value":  "AllUsers"
                                                                                }
                                                                            ]
                                                      },
                                                      {
                                                          "type":  "exec",
                                                          "run_if":  "passed",
                                                          "on_cancel":  null,
                                                          "command":  "%SystemRoot%/System32/WindowsPowerShell/v1.0/powershell.exe",
                                                          "arguments":  [
                                                                            "-ExecutionPolicy",
                                                                            "RemoteSigned",
                                                                            "-NonInteractive",
                                                                            "-NoProfile",
                                                                            "-Command",
                                                                            "\"& 'Invoke-Tasks'\"",
                                                                            "-WorkspaceRoot",
                                                                            "\"%CD%\"",
                                                                            "-ConfigurationFile",
                                                                            "'%MC_BDD_CONFIG_FILE_PATH%'",
                                                                            "-ArtifactsIn",
                                                                            "'%MC_ARTIFACTS_IN%'",
                                                                            "-ArtifactsOut",
                                                                            "'%MC_ARTIFACTS_OUT%'",
                                                                            "-VersionBuildNumber",
                                                                            "\"%GO_PIPELINE_LABEL%\"",
                                                                            "-RevisionId",
                                                                            "\"MCInstaller-%GO_DEPENDENCY_LABEL_INSTALLER%\"",
                                                                            "-BranchName",
                                                                            "\"#{BRANCH_NAME}\"",
                                                                            "-ExternalArgument",
                                                                            "@{ Partitioning = @{ Index = (%GO_JOB_RUN_INDEX% - 1); TotalCount = %GO_JOB_RUN_COUNT% }; GoCdApiUrl = '%GOCD_API_URL%'; GoCdApiUsername = '%GOCD_API_USER%'; GoCdApiPassword = '%GOCD_API_USER_PASSWORD%'; FeatureToggleFilePath = '#{TOGGLE_LIST_FILE_TEMPLATED_PATH}'}",
                                                                            "-InjectedVariables",
                                                                            "@{ BddTestProjectPath = '%BDD_TEST_PROJECT_PATH%'; BddTestRunTimeout = '%BDD_TEST_RUN_TIMEOUT%'; BddTestCaseTimeout = '%BDD_TEST_CASE_TIMEOUT%'; NUnitInternalTrace = '%NUNIT_INTERNAL_TRACE%'; CurrentPipelineName = '%GO_PIPELINE_NAME%'; CurrentStageName = '%GO_STAGE_NAME%'; PipelineCounter = '%GO_PIPELINE_COUNTER%'; PartitionIndex = (%GO_JOB_RUN_INDEX% - 1); PartitionCount = %GO_JOB_RUN_COUNT%; AdsEndpoint = '#{ADS_ENDPOINT}' }",
                                                                            "-Verbose"
                                                                        ],
                                                          "working_directory":  null
                                                      }
                                                  ]
                                    },
                                    {
                                        "name":  "BDD-W2012-SQL2016-ComponentTest-MS",
                                        "run_instance_count":  "1",
                                        "environment_variables":  [
                                                                      {
                                                                          "name":  "MC_BDD_CONFIG_FILE_PATH",
                                                                          "value":  "$In/Acceptance/.ci/AcceptanceStage.ComponentTest.json"
                                                                      },
                                                                      {
                                                                          "name":  "MC_COMPONENT_TEST_COMPONENTS",
                                                                          "value":  "ms"
                                                                      }
                                                                  ],
                                        "timeout":  30,
                                        "elastic_profile_id":  "AWS_AcceptanceWithSQL2016",
                                        "tabs":  [
                                                     {
                                                         "name":  "-BuildReport-",
                                                         "path":  "BuildEvents.Report.html"
                                                     }
                                                 ],
                                        "artifacts":  [
                                                          {
                                                              "source":  "#{ARTIFACTS_OUT}/**/*",
                                                              "destination":  "",
                                                              "type":  "build"
                                                          }
                                                      ],
                                        "properties":  [

                                                       ],
                                        "tasks":  [
                                                      {
                                                          "type":  "fetch",
                                                          "run_if":  "passed",
                                                          "pipeline":  "",
                                                          "stage":  "PrepareAcceptance",
                                                          "job":  "GetWorkspace",
                                                          "is_source_a_file":  false,
                                                          "source":  ".ci",
                                                          "destination":  "#{ARTIFACTS_IN}/Acceptance"
                                                      },
                                                      {
                                                          "type":  "exec",
                                                          "run_if":  "passed",
                                                          "on_cancel":  null,
                                                          "command":  "%SystemRoot%/System32/WindowsPowerShell/v1.0/powershell.exe",
                                                          "arguments":  [
                                                                            "-ExecutionPolicy",
                                                                            "RemoteSigned",
                                                                            "-NonInteractive",
                                                                            "-NoProfile",
                                                                            "-Command",
                                                                            "Copy-S3Object",
                                                                            "-BucketName",
                                                                            "\"%AWS_ACC_S3_BUCKET_NAME%\"",
                                                                            "-KeyPrefix",
                                                                            "\"%GO_PIPELINE_NAME%/%GO_PIPELINE_COUNTER%\"",
                                                                            "-AccessKey",
                                                                            "%AWS_ACCESS_KEY_ID%",
                                                                            "-SecretKey",
                                                                            "%AWS_SECRET_ACCESS_KEY%",
                                                                            "-Region",
                                                                            "%AWS_REGION%",
                                                                            "-LocalFolder",
                                                                            "\"%CD%\"",
                                                                            "-Verbose"
                                                                        ],
                                                          "working_directory":  null
                                                      },
                                                      {
                                                          "type":  "exec",
                                                          "run_if":  "passed",
                                                          "on_cancel":  null,
                                                          "command":  "%SystemRoot%/System32/cmd.exe",
                                                          "arguments":  [
                                                                            "/c",
                                                                            "%SystemRoot%\\System32\\reg.exe",
                                                                            "import",
                                                                            "c:\\hkcu_zones.reg"
                                                                        ],
                                                          "working_directory":  null
                                                      },
                                                      {
                                                          "type":  "plugin",
                                                          "plugin_configuration":  {
                                                                                       "id":  "net.soti.go.plugin.task.psget",
                                                                                       "version":  "1"
                                                                                   },
                                                          "configuration":  [
                                                                                {
                                                                                    "key":  "RepositoryType",
                                                                                    "value":  "SotiDevOps"
                                                                                },
                                                                                {
                                                                                    "key":  "targetDefinitions",
                                                                                    "value":  "Invoke-Tasks:[2.0.0]"
                                                                                },
                                                                                {
                                                                                    "key":  "executionType",
                                                                                    "value":  "Install-Script"
                                                                                },
                                                                                {
                                                                                    "key":  "installationScope",
                                                                                    "value":  "AllUsers"
                                                                                }
                                                                            ]
                                                      },
                                                      {
                                                          "type":  "exec",
                                                          "run_if":  "passed",
                                                          "on_cancel":  null,
                                                          "command":  "%SystemRoot%/System32/WindowsPowerShell/v1.0/powershell.exe",
                                                          "arguments":  [
                                                                            "-ExecutionPolicy",
                                                                            "RemoteSigned",
                                                                            "-NonInteractive",
                                                                            "-NoProfile",
                                                                            "-Command",
                                                                            "\"& 'Invoke-Tasks'\"",
                                                                            "-WorkspaceRoot",
                                                                            "\"%CD%\"",
                                                                            "-ConfigurationFile",
                                                                            "'%MC_BDD_CONFIG_FILE_PATH%'",
                                                                            "-ArtifactsIn",
                                                                            "'%MC_ARTIFACTS_IN%'",
                                                                            "-ArtifactsOut",
                                                                            "'%MC_ARTIFACTS_OUT%'",
                                                                            "-VersionBuildNumber",
                                                                            "\"%GO_PIPELINE_LABEL%\"",
                                                                            "-RevisionId",
                                                                            "\"MCInstaller-%GO_DEPENDENCY_LABEL_INSTALLER%\"",
                                                                            "-BranchName",
                                                                            "\"#{BRANCH_NAME}\"",
                                                                            "-InjectedVariables",
                                                                            "@{ MobiControlComponentTestComponents = '%MC_COMPONENT_TEST_COMPONENTS%' }",
                                                                            "-Verbose"
                                                                        ],
                                                          "working_directory":  null
                                                      }
                                                  ]
                                    }
                                ]
                   },
                   {
                       "name":  "MergeAcceptance",
                       "fetch_materials":  false,
                       "never_cleanup_artifacts":  false,
                       "clean_working_directory":  true,
                       "environment_variables":  [

                                                 ],
                       "jobs":  [
                                    {
                                        "name":  "MergeTestReports",
                                        "run_instance_count":  null,
                                        "timeout":  30,
                                        "elastic_profile_id":  "Elastic_SmallPowerShell",
                                        "artifacts":  [
                                                          {
                                                              "source":  "#{ARTIFACTS_OUT}/**/*",
                                                              "destination":  "",
                                                              "type":  "build"
                                                          },
                                                          {
                                                              "source":  "#{ARTIFACTS_OUT}/BDDTests-Result.xml",
                                                              "destination":  "",
                                                              "type":  "test"
                                                          },
                                                          {
                                                              "source":  "#{ARTIFACTS_IN}/Acceptance/.ci/Misc/Bdd.Whitelist.json",
                                                              "destination":  "",
                                                              "type":  "build"
                                                          }
                                                      ],
                                        "tabs":  [
                                                     {
                                                         "name":  "-BuildReport-",
                                                         "path":  "BuildEvents.Report.html"
                                                     },
                                                     {
                                                         "name":  "ReportUnit",
                                                         "path":  "BDDTests-Result.html"
                                                     },
                                                     {
                                                         "name":  "NUnit-Alt",
                                                         "path":  "BDDTests-Result.Alternative.html"
                                                     },
                                                     {
                                                         "name":  "TestTime",
                                                         "path":  "TestTime.html"
                                                     },
                                                     {
                                                         "name":  "Whitelist",
                                                         "path":  "WhitelistBdds.html"
                                                     }
                                                 ],
                                        "properties":  [
                                                           {
                                                               "name":  "soti.link",
                                                               "source":  "AIn/PipelineProperties.xml",
                                                               "xpath":  "//PipelineProperty/Link/text()"
                                                           },
                                                           {
                                                               "name":  "soti.linkText",
                                                               "source":  "AIn/PipelineProperties.xml",
                                                               "xpath":  "//PipelineProperty/LinkText/text()"
                                                           },
                                                           {
                                                               "name":  "soti.mergedTestNames",
                                                               "source":  "AIn/PipelineProperties.xml",
                                                               "xpath":  "//PipelineProperty/MergedTestNames/text()"
                                                           },
                                                           {
                                                               "name":  "soti.mergedTestResults",
                                                               "source":  "AIn/PipelineProperties.xml",
                                                               "xpath":  "//PipelineProperty/MergedTestResults/text()"
                                                           }
                                                       ],
                                        "tasks":  [
                                                      {
                                                          "type":  "fetch",
                                                          "run_if":  "passed",
                                                          "pipeline":  "",
                                                          "stage":  "PrepareAcceptance",
                                                          "job":  "GetWorkspace",
                                                          "is_source_a_file":  false,
                                                          "source":  ".ci",
                                                          "destination":  "#{ARTIFACTS_IN}/Acceptance"
                                                      },
                                                      {
                                                          "type":  "fetch",
                                                          "run_if":  "passed",
                                                          "pipeline":  "",
                                                          "stage":  "Commit",
                                                          "job":  "BDD",
                                                          "is_source_a_file":  true,
                                                          "source":  "Bdd.Binaries.zip",
                                                          "destination":  ""
                                                      },
                                                      {
                                                          "type":  "exec",
                                                          "run_if":  "passed",
                                                          "on_cancel":  null,
                                                          "command":  "%SystemRoot%/System32/WindowsPowerShell/v1.0/powershell.exe",
                                                          "arguments":  [
                                                                            "-ExecutionPolicy",
                                                                            "RemoteSigned",
                                                                            "-NonInteractive",
                                                                            "-NoProfile",
                                                                            "-Command",
                                                                            "Expand-Archive",
                                                                            "-LiteralPath",
                                                                            "\"%CD%\\Bdd.Binaries.zip\"",
                                                                            "-DestinationPath",
                                                                            "\"%CD%\\#{ARTIFACTS_IN}\""
                                                                        ],
                                                          "working_directory":  null
                                                      },
                                                      {
                                                          "type":  "plugin",
                                                          "plugin_configuration":  {
                                                                                       "id":  "net.soti.go.plugin.task.fetch.artifacts",
                                                                                       "version":  "1"
                                                                                   },
                                                          "configuration":  [
                                                                                {
                                                                                    "key":  "PipelineName",
                                                                                    "value":  "."
                                                                                },
                                                                                {
                                                                                    "key":  "StageName",
                                                                                    "value":  "ExecuteAcceptance"
                                                                                },
                                                                                {
                                                                                    "key":  "JobName",
                                                                                    "value":  "*"
                                                                                },
                                                                                {
                                                                                    "key":  "ArtifactsPath",
                                                                                    "value":  "BDDTests-Result.xml"
                                                                                },
                                                                                {
                                                                                    "key":  "DownloadPath",
                                                                                    "value":  "#{ARTIFACTS_IN}"
                                                                                }
                                                                            ]
                                                      },
                                                      {
                                                          "type":  "plugin",
                                                          "plugin_configuration":  {
                                                                                       "id":  "net.soti.go.plugin.task.fetch.artifacts",
                                                                                       "version":  "1"
                                                                                   },
                                                          "configuration":  [
                                                                                {
                                                                                    "key":  "PipelineName",
                                                                                    "value":  "."
                                                                                },
                                                                                {
                                                                                    "key":  "StageName",
                                                                                    "value":  "ExecuteAcceptance"
                                                                                },
                                                                                {
                                                                                    "key":  "JobName",
                                                                                    "value":  "*"
                                                                                },
                                                                                {
                                                                                    "key":  "ArtifactsPath",
                                                                                    "value":  "BDDTests-TestCases.txt"
                                                                                },
                                                                                {
                                                                                    "key":  "DownloadPath",
                                                                                    "value":  "#{ARTIFACTS_IN}\\TestCases"
                                                                                }
                                                                            ]
                                                      },
                                                      {
                                                          "type":  "plugin",
                                                          "plugin_configuration":  {
                                                                                       "id":  "net.soti.go.plugin.task.psget",
                                                                                       "version":  "1"
                                                                                   },
                                                          "configuration":  [
                                                                                {
                                                                                    "key":  "RepositoryType",
                                                                                    "value":  "SotiDevOps"
                                                                                },
                                                                                {
                                                                                    "key":  "targetDefinitions",
                                                                                    "value":  "Invoke-Tasks:[2.0.0]"
                                                                                },
                                                                                {
                                                                                    "key":  "executionType",
                                                                                    "value":  "Install-Script"
                                                                                },
                                                                                {
                                                                                    "key":  "installationScope",
                                                                                    "value":  "AllUsers"
                                                                                }
                                                                            ]
                                                      },
                                                      {
                                                          "type":  "exec",
                                                          "run_if":  "passed",
                                                          "on_cancel":  null,
                                                          "command":  "%SystemRoot%/System32/WindowsPowerShell/v1.0/powershell.exe",
                                                          "arguments":  [
                                                                            "-ExecutionPolicy",
                                                                            "RemoteSigned",
                                                                            "-NonInteractive",
                                                                            "-NoProfile",
                                                                            "-Command",
                                                                            "\"& 'Invoke-Tasks'\"",
                                                                            "-WorkspaceRoot",
                                                                            "\"%CD%\"",
                                                                            "-ConfigurationFile",
                                                                            "'$Root/%MC_ARTIFACTS_IN%/Acceptance/.ci/MergeAcceptanceStage.json'",
                                                                            "-ArtifactsIn",
                                                                            "'%MC_ARTIFACTS_IN%'",
                                                                            "-ArtifactsOut",
                                                                            "'%MC_ARTIFACTS_OUT%'",
                                                                            "-VersionBuildNumber",
                                                                            "\"%GO_PIPELINE_LABEL%\"",
                                                                            "-RevisionId",
                                                                            "\"MCInstaller-%GO_DEPENDENCY_LABEL_INSTALLER%\"",
                                                                            "-BranchName",
                                                                            "\"#{BRANCH_NAME}\"",
                                                                            "-ExternalArgument",
                                                                            "@{GoCdApiUrl = '%GOCD_API_URL%'; GoCdApiUsername = '%GOCD_API_USER%'; GoCdApiPassword = '%GOCD_API_USER_PASSWORD%'}",
                                                                            "-InjectedVariables",
                                                                            "@{ CurrentPipelineName = '%GO_PIPELINE_NAME%'; CurrentStageName = '%GO_STAGE_NAME%'; PipelineCounter = '%GO_PIPELINE_COUNTER%' }",
                                                                            "-Verbose"
                                                                        ],
                                                          "working_directory":  null
                                                      }
                                                  ]
                                    }
                                ]
                   },
                   {
                       "name":  "Publish",
                       "fetch_materials":  false,
                       "never_cleanup_artifacts":  true,
                       "clean_working_directory":  true,
                       "approval":  null,
                       "environment_variables":  [

                                                 ],
                       "jobs":  [
                                    {
                                        "name":  "Artifactory",
                                        "run_instance_count":  null,
                                        "environment_variables":  [

                                                                  ],
                                        "timeout":  60,
                                        "elastic_profile_id":  "Elastic_SmallPowerShell",
                                        "tabs":  [
                                                     {
                                                         "name":  "-BuildReport-",
                                                         "path":  "BuildEvents.Report.html"
                                                     }
                                                 ],
                                        "artifacts":  [
                                                          {
                                                              "source":  "#{ARTIFACTS_OUT}/**/*",
                                                              "destination":  "",
                                                              "type":  "build"
                                                          },
                                                          {
                                                              "source":  "#{ARTIFACTS_IN}/InstallerInfo.xml",
                                                              "destination":  "",
                                                              "type":  "build"
                                                          },
                                                          {
                                                              "source":  "#{ARTIFACTS_IN}/ArtifactInfo.xml",
                                                              "destination":  "",
                                                              "type":  "build"
                                                          }
                                                      ],
                                        "properties":  [
                                                           {
                                                               "name":  "soti.buildNumber",
                                                               "source":  "#{ARTIFACTS_IN}/ArtifactInfo.xml",
                                                               "xpath":  "//ArtifactInfo/BuildNumber/text()"
                                                           },
                                                           {
                                                               "name":  "soti.baseArtifactUrl",
                                                               "source":  "#{ARTIFACTS_IN}/ArtifactInfo.xml",
                                                               "xpath":  "//ArtifactInfo/ParentFolderUrl/text()"
                                                           },
                                                           {
                                                               "name":  "soti.s3BucketUrl",
                                                               "source":  "#{ARTIFACTS_IN}/ArtifactInfo.xml",
                                                               "xpath":  "//ArtifactInfo/S3BucketUrl/text()"
                                                           }
                                                       ],
                                        "tasks":  [
                                                      {
                                                          "type":  "plugin",
                                                          "run_if":  "any",
                                                          "plugin_configuration":  {
                                                                                       "id":  "net.soti.go.plugin.task.info",
                                                                                       "version":  "1"
                                                                                   },
                                                          "configuration":  [
                                                                                {
                                                                                    "key":  "HyperVKey",
                                                                                    "value":  "VmImageHash"
                                                                                }
                                                                            ]
                                                      },
                                                      {
                                                          "type":  "fetch",
                                                          "run_if":  "passed",
                                                          "pipeline":  "",
                                                          "stage":  "Packaging",
                                                          "job":  "Installer",
                                                          "is_source_a_file":  false,
                                                          "source":  "Setup",
                                                          "destination":  "#{ARTIFACTS_IN}"
                                                      },
                                                      {
                                                          "type":  "fetch",
                                                          "run_if":  "passed",
                                                          "pipeline":  "",
                                                          "stage":  "Packaging",
                                                          "job":  "Installer",
                                                          "is_source_a_file":  true,
                                                          "source":  "InstallerInfo.xml",
                                                          "destination":  "#{ARTIFACTS_IN}"
                                                      },
                                                      {
                                                          "type":  "fetch",
                                                          "run_if":  "passed",
                                                          "pipeline":  "",
                                                          "stage":  "Commit",
                                                          "job":  "ManagedComponents",
                                                          "is_source_a_file":  true,
                                                          "source":  "ManagedComponents.Binaries.zip",
                                                          "destination":  ""
                                                      },
                                                      {
                                                          "type":  "fetch",
                                                          "run_if":  "passed",
                                                          "pipeline":  "",
                                                          "stage":  "Commit",
                                                          "job":  "CppProjects",
                                                          "is_source_a_file":  true,
                                                          "source":  "CommTracer.Binaries.zip",
                                                          "destination":  ""
                                                      },
                                                      {
                                                          "type":  "fetch",
                                                          "run_if":  "passed",
                                                          "pipeline":  "",
                                                          "stage":  "Commit",
                                                          "job":  "CppProjects",
                                                          "is_source_a_file":  true,
                                                          "source":  "PackageStudio.Binaries.zip",
                                                          "destination":  ""
                                                      },
                                                      {
                                                          "type":  "fetch",
                                                          "run_if":  "passed",
                                                          "pipeline":  "",
                                                          "stage":  "Commit",
                                                          "job":  "CppProjects",
                                                          "is_source_a_file":  true,
                                                          "source":  "Simulation.Binaries.zip",
                                                          "destination":  ""
                                                      },
                                                      {
                                                          "type":  "fetch",
                                                          "run_if":  "passed",
                                                          "pipeline":  "",
                                                          "stage":  "Commit",
                                                          "job":  "CppProjects",
                                                          "is_source_a_file":  true,
                                                          "source":  "DeploymentServer.Binaries.zip",
                                                          "destination":  ""
                                                      },
                                                      {
                                                          "type":  "fetch",
                                                          "run_if":  "passed",
                                                          "pipeline":  "",
                                                          "stage":  "Commit",
                                                          "job":  "CppProjects",
                                                          "is_source_a_file":  true,
                                                          "source":  "MobiControl.DBSetup.Binaries.zip",
                                                          "destination":  ""
                                                      },
                                                      {
                                                          "type":  "fetch",
                                                          "run_if":  "passed",
                                                          "pipeline":  "",
                                                          "stage":  "Packaging",
                                                          "job":  "Installer",
                                                          "is_source_a_file":  true,
                                                          "source":  "AgentBuilderService.zip",
                                                          "destination":  ""
                                                      },
                                                      {
                                                          "type":  "fetch",
                                                          "run_if":  "passed",
                                                          "pipeline":  "",
                                                          "stage":  "Commit",
                                                          "job":  "BDD",
                                                          "is_source_a_file":  true,
                                                          "source":  "Bdd.Binaries.zip",
                                                          "destination":  ""
                                                      },
                                                      {
                                                          "type":  "fetch",
                                                          "run_if":  "passed",
                                                          "pipeline":  "",
                                                          "stage":  "PrepareAcceptance",
                                                          "job":  "GetWorkspace",
                                                          "is_source_a_file":  true,
                                                          "source":  "AgentDeliveryService.Binaries.zip",
                                                          "destination":  ""
                                                      },
                                                      {
                                                          "type":  "fetch",
                                                          "run_if":  "passed",
                                                          "pipeline":  "",
                                                          "stage":  "Commit",
                                                          "job":  "DesktopAgent",
                                                          "is_source_a_file":  true,
                                                          "source":  "DesktopAgent.Binaries.zip",
                                                          "destination":  ""
                                                      },
                                                      {
                                                          "type":  "fetch",
                                                          "run_if":  "passed",
                                                          "pipeline":  "",
                                                          "stage":  "Commit",
                                                          "job":  "PocketControllerEnterprise",
                                                          "is_source_a_file":  true,
                                                          "source":  "PocketControllerEnterprise.Binaries.zip",
                                                          "destination":  ""
                                                      },
                                                      {
                                                          "type":  "fetch",
                                                          "run_if":  "passed",
                                                          "pipeline":  "",
                                                          "stage":  "PrepareAcceptance",
                                                          "job":  "GetWorkspace",
                                                          "is_source_a_file":  false,
                                                          "source":  ".ci",
                                                          "destination":  "#{ARTIFACTS_IN}/Acceptance"
                                                      },
                                                      {
                                                          "type":  "plugin",
                                                          "plugin_configuration":  {
                                                                                       "id":  "net.soti.go.plugin.task.psget",
                                                                                       "version":  "1"
                                                                                   },
                                                          "configuration":  [
                                                                                {
                                                                                    "key":  "RepositoryType",
                                                                                    "value":  "SotiDevOps"
                                                                                },
                                                                                {
                                                                                    "key":  "targetDefinitions",
                                                                                    "value":  "Invoke-DownloadFile:[1.0.0],Invoke-Tasks:[2.0.0]"
                                                                                },
                                                                                {
                                                                                    "key":  "executionType",
                                                                                    "value":  "Install-Script"
                                                                                },
                                                                                {
                                                                                    "key":  "installationScope",
                                                                                    "value":  "AllUsers"
                                                                                }
                                                                            ]
                                                      },
                                                      {
                                                          "type":  "exec",
                                                          "run_if":  "passed",
                                                          "on_cancel":  null,
                                                          "command":  "%SystemRoot%/System32/WindowsPowerShell/v1.0/powershell.exe",
                                                          "arguments":  [
                                                                            "-ExecutionPolicy",
                                                                            "RemoteSigned",
                                                                            "-NonInteractive",
                                                                            "-NoProfile",
                                                                            "-Command",
                                                                            "\"& 'Invoke-Tasks'\"",
                                                                            "-WorkspaceRoot",
                                                                            "\"%CD%\"",
                                                                            "-ConfigurationFile",
                                                                            "'$In/Acceptance/.ci/PublishStage.Artifactory.json'",
                                                                            "-ArtifactsIn",
                                                                            "'%MC_ARTIFACTS_IN%'",
                                                                            "-ArtifactsOut",
                                                                            "'%MC_ARTIFACTS_OUT%'",
                                                                            "-VersionBuildNumber",
                                                                            "\"%GO_PIPELINE_COUNTER%\"",
                                                                            "-RevisionId",
                                                                            "\"MCInstaller-%GO_PIPELINE_COUNTER%\"",
                                                                            "-BranchName",
                                                                            "\"#{BRANCH_NAME}\"",
                                                                            "-ExternalArgument",
                                                                            "@{ ArtifactoryAccessToken = '%MC_REPO_KEY%' }",
                                                                            "-InjectedVariables",
                                                                            "@{ ArtifactoryUrl = '%MC_ARTIFACTORY_URL%'; ArtifactoryRepository = '%BUILD_ARTIFACTORY_REPOSITORY%'; BucketName = '%ARTIFACTORY_MIRROR_BUCKET_NAME%'; AwsRegion = '%ARTIFACTORY_MIRROR_BUCKET_REGION%'; AwsAccessKey = '%AWS_ACCESS_KEY_ID%'; AwsSecretKey = '%AWS_SECRET_ACCESS_KEY%'; }",
                                                                            "-Verbose"
                                                                        ],
                                                          "working_directory":  null
                                                      }
                                                  ]
                                    },
                                    {
                                        "name":  "ABS",
                                        "run_instance_count":  null,
                                        "environment_variables":  [

                                                                  ],
                                        "timeout":  60,
                                        "elastic_profile_id":  "Elastic_SmallPowerShell",
                                        "tabs":  [
                                                     {
                                                         "name":  "-BuildReport-",
                                                         "path":  "BuildEvents.Report.html"
                                                     }
                                                 ],
                                        "artifacts":  [
                                                          {
                                                              "source":  "#{ARTIFACTS_OUT}/**/*",
                                                              "destination":  "",
                                                              "type":  "build"
                                                          }
                                                      ],
                                        "properties":  [

                                                       ],
                                        "tasks":  [
                                                      {
                                                          "type":  "plugin",
                                                          "run_if":  "any",
                                                          "plugin_configuration":  {
                                                                                       "id":  "net.soti.go.plugin.task.info",
                                                                                       "version":  "1"
                                                                                   },
                                                          "configuration":  [
                                                                                {
                                                                                    "key":  "HyperVKey",
                                                                                    "value":  "VmImageHash"
                                                                                }
                                                                            ]
                                                      },
                                                      {
                                                          "type":  "fetch",
                                                          "run_if":  "passed",
                                                          "pipeline":  "",
                                                          "stage":  "Commit",
                                                          "job":  "BDD",
                                                          "is_source_a_file":  true,
                                                          "source":  "Bdd.Binaries.zip",
                                                          "destination":  ""
                                                      },
                                                      {
                                                          "type":  "fetch",
                                                          "run_if":  "passed",
                                                          "pipeline":  "",
                                                          "stage":  "PrepareAcceptance",
                                                          "job":  "GetWorkspace",
                                                          "is_source_a_file":  true,
                                                          "source":  "AgentDeliveryService.Binaries.zip",
                                                          "destination":  ""
                                                      },
                                                      {
                                                          "type":  "fetch",
                                                          "run_if":  "passed",
                                                          "pipeline":  "",
                                                          "stage":  "Packaging",
                                                          "job":  "Installer",
                                                          "is_source_a_file":  true,
                                                          "source":  "AgentBuilderService.zip",
                                                          "destination":  ""
                                                      },
                                                      {
                                                          "type":  "fetch",
                                                          "run_if":  "passed",
                                                          "pipeline":  "",
                                                          "stage":  "PrepareAcceptance",
                                                          "job":  "GetWorkspace",
                                                          "is_source_a_file":  false,
                                                          "source":  ".ci",
                                                          "destination":  "#{ARTIFACTS_IN}/Acceptance"
                                                      },
                                                      {
                                                          "type":  "plugin",
                                                          "plugin_configuration":  {
                                                                                       "id":  "net.soti.go.plugin.task.psget",
                                                                                       "version":  "1"
                                                                                   },
                                                          "configuration":  [
                                                                                {
                                                                                    "key":  "RepositoryType",
                                                                                    "value":  "SotiDevOps"
                                                                                },
                                                                                {
                                                                                    "key":  "targetDefinitions",
                                                                                    "value":  "Invoke-Tasks:[2.0.0]"
                                                                                },
                                                                                {
                                                                                    "key":  "executionType",
                                                                                    "value":  "Install-Script"
                                                                                },
                                                                                {
                                                                                    "key":  "installationScope",
                                                                                    "value":  "AllUsers"
                                                                                }
                                                                            ]
                                                      },
                                                      {
                                                          "type":  "exec",
                                                          "run_if":  "passed",
                                                          "on_cancel":  null,
                                                          "command":  "%SystemRoot%/System32/WindowsPowerShell/v1.0/powershell.exe",
                                                          "arguments":  [
                                                                            "-ExecutionPolicy",
                                                                            "RemoteSigned",
                                                                            "-NonInteractive",
                                                                            "-NoProfile",
                                                                            "-Command",
                                                                            "\"& 'Invoke-Tasks'\"",
                                                                            "-WorkspaceRoot",
                                                                            "\"%CD%\"",
                                                                            "-ConfigurationFile",
                                                                            "'$In/Acceptance/.ci/PublishStage.ABS.json'",
                                                                            "-ArtifactsIn",
                                                                            "'%MC_ARTIFACTS_IN%'",
                                                                            "-ArtifactsOut",
                                                                            "'%MC_ARTIFACTS_OUT%'",
                                                                            "-VersionBuildNumber",
                                                                            "\"%GO_PIPELINE_COUNTER%\"",
                                                                            "-RevisionId",
                                                                            "\"MCInstaller-%GO_PIPELINE_COUNTER%\"",
                                                                            "-BranchName",
                                                                            "\"#{BRANCH_NAME}\"",
                                                                            "-ExternalArgument",
                                                                            "@{ UploadPassword = '%MC_ABS_USER_PASSWORD%'; DatabasePassword = '%MC_ABS_DB_USER_PASSWORD%'}",
                                                                            "-Verbose"
                                                                        ],
                                                          "working_directory":  null
                                                      }
                                                  ]
                                    }
                                ]
                   },
                   {
                       "name":  "PreProduction",
                       "fetch_materials":  false,
                       "never_cleanup_artifacts":  false,
                       "clean_working_directory":  true,
                       "approval":  {
                                        "type":  "manual",
                                        "authorization":  {
                                                              "roles":  [
                                                                            "DevOpsTeam",
                                                                            "QATeam"
                                                                        ],
                                                              "users":  [

                                                                        ]
                                                          }
                                    },
                       "environment_variables":  [

                                                 ],
                       "jobs":  [
                                    {
                                        "name":  "PublishABS",
                                        "run_instance_count":  null,
                                        "environment_variables":  [

                                                                  ],
                                        "timeout":  60,
                                        "elastic_profile_id":  "Elastic_SmallPowerShell",
                                        "tabs":  [
                                                     {
                                                         "name":  "-BuildReport-",
                                                         "path":  "BuildEvents.Report.html"
                                                     }
                                                 ],
                                        "artifacts":  [
                                                          {
                                                              "source":  "#{ARTIFACTS_OUT}/**/*",
                                                              "destination":  "",
                                                              "type":  "build"
                                                          }
                                                      ],
                                        "properties":  [

                                                       ],
                                        "tasks":  [
                                                      {
                                                          "type":  "plugin",
                                                          "run_if":  "any",
                                                          "plugin_configuration":  {
                                                                                       "id":  "net.soti.go.plugin.task.info",
                                                                                       "version":  "1"
                                                                                   },
                                                          "configuration":  [
                                                                                {
                                                                                    "key":  "HyperVKey",
                                                                                    "value":  "VmImageHash"
                                                                                }
                                                                            ]
                                                      },
                                                      {
                                                          "type":  "fetch",
                                                          "run_if":  "any",
                                                          "pipeline":  "",
                                                          "stage":  "Publish",
                                                          "job":  "Artifactory",
                                                          "is_source_a_file":  true,
                                                          "source":  "InstallerInfo.xml",
                                                          "destination":  "#{ARTIFACTS_IN}"
                                                      },
                                                      {
                                                          "type":  "fetch",
                                                          "run_if":  "any",
                                                          "pipeline":  "",
                                                          "stage":  "Publish",
                                                          "job":  "Artifactory",
                                                          "is_source_a_file":  true,
                                                          "source":  "ArtifactInfo.xml",
                                                          "destination":  "#{ARTIFACTS_IN}"
                                                      },
                                                      {
                                                          "type":  "fetch",
                                                          "run_if":  "passed",
                                                          "pipeline":  "",
                                                          "stage":  "PrepareAcceptance",
                                                          "job":  "GetWorkspace",
                                                          "is_source_a_file":  false,
                                                          "source":  ".ci",
                                                          "destination":  "#{ARTIFACTS_IN}/Acceptance"
                                                      },
                                                      {
                                                          "type":  "plugin",
                                                          "plugin_configuration":  {
                                                                                       "id":  "net.soti.go.plugin.task.psget",
                                                                                       "version":  "1"
                                                                                   },
                                                          "configuration":  [
                                                                                {
                                                                                    "key":  "RepositoryType",
                                                                                    "value":  "SotiDevOps"
                                                                                },
                                                                                {
                                                                                    "key":  "targetDefinitions",
                                                                                    "value":  "Invoke-Tasks:[2.0.0]"
                                                                                },
                                                                                {
                                                                                    "key":  "executionType",
                                                                                    "value":  "Install-Script"
                                                                                },
                                                                                {
                                                                                    "key":  "installationScope",
                                                                                    "value":  "AllUsers"
                                                                                }
                                                                            ]
                                                      },
                                                      {
                                                          "type":  "exec",
                                                          "run_if":  "passed",
                                                          "on_cancel":  null,
                                                          "command":  "%SystemRoot%/System32/WindowsPowerShell/v1.0/powershell.exe",
                                                          "arguments":  [
                                                                            "-ExecutionPolicy",
                                                                            "RemoteSigned",
                                                                            "-NonInteractive",
                                                                            "-NoProfile",
                                                                            "-Command",
                                                                            "\"& 'Invoke-Tasks'\"",
                                                                            "-WorkspaceRoot",
                                                                            "\"%CD%\"",
                                                                            "-ConfigurationFile",
                                                                            "'$In/Acceptance/.ci/PreProductionStage.PublishABS.json'",
                                                                            "-ArtifactsIn",
                                                                            "'%MC_ARTIFACTS_IN%'",
                                                                            "-ArtifactsOut",
                                                                            "'%MC_ARTIFACTS_OUT%'",
                                                                            "-VersionBuildNumber",
                                                                            "\"%GO_PIPELINE_COUNTER%\"",
                                                                            "-RevisionId",
                                                                            "\"MCInstaller-%GO_DEPENDENCY_LABEL_INSTALLER%\"",
                                                                            "-BranchName",
                                                                            "\"#{BRANCH_NAME}\"",
                                                                            "-ExternalArgument",
                                                                            "@{ UploadPassword = '%MC_ABS_USER_PASSWORD%'; DatabasePassword = '%MC_ABS_DB_USER_PASSWORD%'}",
                                                                            "-Verbose"
                                                                        ],
                                                          "working_directory":  null
                                                      }
                                                  ]
                                    }
                                ]
                   }
               ]
}
